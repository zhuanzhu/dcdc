<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.egeo.components.pay.dao.read.PayAliLogReadDAO">
	<resultMap type="com.egeo.components.pay.po.PayAliLogPO" id="payAliLogMap">
		<result property="id" column="id" />
		<result property="payType" column="pay_type" />
		<result property="buyerId" column="buyer_id" />
		<result property="tradeNo" column="trade_no" />
		<result property="useCoupon" column="use_coupon" />
		<result property="notifyTime" column="notify_time" />
		<result property="subject" column="subject" />
		<result property="signType" column="sign_type" />
		<result property="isTotalFeeAdjust" column="is_total_fee_adjust" />
		<result property="notifyType" column="notify_type" />
		<result property="outTradeNo" column="out_trade_no" />
		<result property="gmtPayment" column="gmt_payment" />
		<result property="tradeStatus" column="trade_status" />
		<result property="discount" column="discount" />
		<result property="sign" column="sign" />
		<result property="buyerEmail" column="buyer_email" />
		<result property="gmtCreate" column="gmt_create" />
		<result property="price" column="price" />
		<result property="totalFee" column="total_fee" />
		<result property="quantity" column="quantity" />
		<result property="sellerId" column="seller_id" />
		<result property="notityId" column="notity_id" />
		<result property="sellerEmail" column="seller_email" />
		<result property="paymentType" column="payment_type" />
		<result property="createTime" column="create_time" />
		<result property="updateTime" column="update_time" />
		<result property="platformId" column="platform_id" />
	</resultMap>

	<sql id="payAliLogColumns">
		id,
		pay_type,
		buyer_id,
		trade_no,
		use_coupon,
		notify_time,
		subject,
		sign_type,
		is_total_fee_adjust,
		notify_type,
		out_trade_no,
		gmt_payment,
		trade_status,
		discount,
		sign,
		buyer_email,
		gmt_create,
		price,
		total_fee,
		quantity,
		seller_id,
		notity_id,
		seller_email,
		payment_type,
		create_time,
		update_time,
		platform_id
	</sql>

	<select id="findById" parameterType="com.egeo.components.pay.po.PayAliLogPO" resultMap="payAliLogMap">
		SELECT
		<include refid="payAliLogColumns" />
		FROM p_pay_ali_log
		WHERE id = #{po.id}
	</select>

	<select id="findOfPage" resultMap="payAliLogMap">
		SELECT
		<include refid="payAliLogColumns" />
		FROM p_pay_ali_log
		<where>
			<if test="po.payType != null">
				and pay_type = #{po.payType}
			</if>
			<if test="po.buyerId != null">
				and buyer_id = #{po.buyerId}
			</if>
			<if test="po.tradeNo != null">
				and trade_no = #{po.tradeNo}
			</if>
			<if test="po.useCoupon != null">
				and use_coupon = #{po.useCoupon}
			</if>
			<if test="po.notifyTime != null">
				and notify_time = #{po.notifyTime}
			</if>
			<if test="po.subject != null">
				and subject = #{po.subject}
			</if>
			<if test="po.signType != null">
				and sign_type = #{po.signType}
			</if>
			<if test="po.isTotalFeeAdjust != null">
				and is_total_fee_adjust = #{po.isTotalFeeAdjust}
			</if>
			<if test="po.notifyType != null">
				and notify_type = #{po.notifyType}
			</if>
			<if test="po.outTradeNo != null">
				and out_trade_no = #{po.outTradeNo}
			</if>
			<if test="po.gmtPayment != null">
				and gmt_payment = #{po.gmtPayment}
			</if>
			<if test="po.tradeStatus != null">
				and trade_status = #{po.tradeStatus}
			</if>
			<if test="po.discount != null">
				and discount = #{po.discount}
			</if>
			<if test="po.sign != null">
				and sign = #{po.sign}
			</if>
			<if test="po.buyerEmail != null">
				and buyer_email = #{po.buyerEmail}
			</if>
			<if test="po.gmtCreate != null">
				and gmt_create = #{po.gmtCreate}
			</if>
			<if test="po.price != null">
				and price = #{po.price}
			</if>
			<if test="po.totalFee != null">
				and total_fee = #{po.totalFee}
			</if>
			<if test="po.quantity != null">
				and quantity = #{po.quantity}
			</if>
			<if test="po.sellerId != null">
				and seller_id = #{po.sellerId}
			</if>
			<if test="po.notityId != null">
				and notity_id = #{po.notityId}
			</if>
			<if test="po.sellerEmail != null">
				and seller_email = #{po.sellerEmail}
			</if>
			<if test="po.paymentType != null">
				and payment_type = #{po.paymentType}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>		
			<otherwise>
				ORDER BY id desc		
			</otherwise>
		</choose>
		<if test="page != null">
		limit #{page.limitStart},#{page.pageSize}
		</if>
	</select>
	
	<select id="countOfPage" resultType="java.lang.Integer">
		SELECT
		count(1) cnt
		FROM p_pay_ali_log
		<where>
			<if test="po.payType != null">
				and pay_type = #{po.payType}
			</if>
			<if test="po.buyerId != null">
				and buyer_id = #{po.buyerId}
			</if>
			<if test="po.tradeNo != null">
				and trade_no = #{po.tradeNo}
			</if>
			<if test="po.useCoupon != null">
				and use_coupon = #{po.useCoupon}
			</if>
			<if test="po.notifyTime != null">
				and notify_time = #{po.notifyTime}
			</if>
			<if test="po.subject != null">
				and subject = #{po.subject}
			</if>
			<if test="po.signType != null">
				and sign_type = #{po.signType}
			</if>
			<if test="po.isTotalFeeAdjust != null">
				and is_total_fee_adjust = #{po.isTotalFeeAdjust}
			</if>
			<if test="po.notifyType != null">
				and notify_type = #{po.notifyType}
			</if>
			<if test="po.outTradeNo != null">
				and out_trade_no = #{po.outTradeNo}
			</if>
			<if test="po.gmtPayment != null">
				and gmt_payment = #{po.gmtPayment}
			</if>
			<if test="po.tradeStatus != null">
				and trade_status = #{po.tradeStatus}
			</if>
			<if test="po.discount != null">
				and discount = #{po.discount}
			</if>
			<if test="po.sign != null">
				and sign = #{po.sign}
			</if>
			<if test="po.buyerEmail != null">
				and buyer_email = #{po.buyerEmail}
			</if>
			<if test="po.gmtCreate != null">
				and gmt_create = #{po.gmtCreate}
			</if>
			<if test="po.price != null">
				and price = #{po.price}
			</if>
			<if test="po.totalFee != null">
				and total_fee = #{po.totalFee}
			</if>
			<if test="po.quantity != null">
				and quantity = #{po.quantity}
			</if>
			<if test="po.sellerId != null">
				and seller_id = #{po.sellerId}
			</if>
			<if test="po.notityId != null">
				and notity_id = #{po.notityId}
			</if>
			<if test="po.sellerEmail != null">
				and seller_email = #{po.sellerEmail}
			</if>
			<if test="po.paymentType != null">
				and payment_type = #{po.paymentType}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
		</where>
	</select>
	
	<select id="findAll" resultMap="payAliLogMap">
		SELECT
		<include refid="payAliLogColumns" />
		FROM p_pay_ali_log
		<where>
			<if test="po.payType != null">
				and pay_type = #{po.payType}
			</if>
			<if test="po.buyerId != null">
				and buyer_id = #{po.buyerId}
			</if>
			<if test="po.tradeNo != null">
				and trade_no = #{po.tradeNo}
			</if>
			<if test="po.useCoupon != null">
				and use_coupon = #{po.useCoupon}
			</if>
			<if test="po.notifyTime != null">
				and notify_time = #{po.notifyTime}
			</if>
			<if test="po.subject != null">
				and subject = #{po.subject}
			</if>
			<if test="po.signType != null">
				and sign_type = #{po.signType}
			</if>
			<if test="po.isTotalFeeAdjust != null">
				and is_total_fee_adjust = #{po.isTotalFeeAdjust}
			</if>
			<if test="po.notifyType != null">
				and notify_type = #{po.notifyType}
			</if>
			<if test="po.outTradeNo != null">
				and out_trade_no = #{po.outTradeNo}
			</if>
			<if test="po.gmtPayment != null">
				and gmt_payment = #{po.gmtPayment}
			</if>
			<if test="po.tradeStatus != null">
				and trade_status = #{po.tradeStatus}
			</if>
			<if test="po.discount != null">
				and discount = #{po.discount}
			</if>
			<if test="po.sign != null">
				and sign = #{po.sign}
			</if>
			<if test="po.buyerEmail != null">
				and buyer_email = #{po.buyerEmail}
			</if>
			<if test="po.gmtCreate != null">
				and gmt_create = #{po.gmtCreate}
			</if>
			<if test="po.price != null">
				and price = #{po.price}
			</if>
			<if test="po.totalFee != null">
				and total_fee = #{po.totalFee}
			</if>
			<if test="po.quantity != null">
				and quantity = #{po.quantity}
			</if>
			<if test="po.sellerId != null">
				and seller_id = #{po.sellerId}
			</if>
			<if test="po.notityId != null">
				and notity_id = #{po.notityId}
			</if>
			<if test="po.sellerEmail != null">
				and seller_email = #{po.sellerEmail}
			</if>
			<if test="po.paymentType != null">
				and payment_type = #{po.paymentType}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>			
			<otherwise>
				ORDER BY id desc		
			</otherwise>
		</choose>
	</select>
</mapper>
	