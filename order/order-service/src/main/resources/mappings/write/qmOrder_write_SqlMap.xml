<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.egeo.components.order.dao.write.QmOrderWriteDAO">
	<insert id="insert" parameterType="com.egeo.components.order.po.QmOrderPO">
		INSERT INTO qm_order(
        <trim suffixOverrides=",">
			<if test="soId != null">
				so_id,
			</if>
			<if test="outTradeNo != null">
				out_trade_no,
			</if>
			<if test="returnUrl != null">
				return_url,
			</if>
			<if test="notifyUrl != null">
				notify_url,
			</if>
			<if test="remark != null">
				remark,
			</if>
			<if test="orderCode != null">
				order_code,
			</if>
			<if test="orderTime != null">
				order_time,
			</if>
			<if test="expireTime != null">
				expire_time,
			</if>
			<if test="createTime != null">
				create_time,
			</if>
			<if test="syncPayStatus != null">
				sync_pay_status,
			</if>
			<if test="syncPayCount != null">
				sync_pay_count,
			</if>
			<if test="orderPayTime != null">
				order_pay_time,
			</if>
			<if test="syncTime != null">
				sync_time,
			</if>
        </trim>		
		) VALUES (
        <trim suffixOverrides=",">
			<if test="soId != null">
				#{soId},
			</if>
			<if test="outTradeNo != null">
				#{outTradeNo},
			</if>
			<if test="returnUrl != null">
				#{returnUrl},
			</if>
			<if test="notifyUrl != null">
				#{notifyUrl},
			</if>
			<if test="remark != null">
				#{remark},
			</if>
			<if test="orderCode != null">
				#{orderCode},
			</if>
			<if test="orderTime != null">
				#{orderTime},
			</if>
			<if test="expireTime != null">
				#{expireTime},
			</if>
			<if test="createTime != null">
				#{createTime},
			</if>
			<if test="syncPayStatus != null">
				#{syncPayStatus},
			</if>
			<if test="syncPayCount != null">
				#{syncPayCount},
			</if>
			<if test="orderPayTime != null">
				#{orderPayTime},
			</if>
			<if test="syncTime != null">
				#{syncTime},
			</if>
        </trim>		
		)
		<selectKey keyProperty="id" resultType="java.lang.Long">
			select LAST_INSERT_ID()
		</selectKey>
	</insert>


	<update id="update">
		UPDATE qm_order
		<set>
			<if test="soId != null">
				so_id=#{soId},
			</if>
			<if test="outTradeNo != null">
				out_trade_no=#{outTradeNo},
			</if>
			<if test="returnUrl != null">
				return_url=#{returnUrl},
			</if>
			<if test="notifyUrl != null">
				notify_url=#{notifyUrl},
			</if>
			<if test="remark != null">
				remark=#{remark},
			</if>
			<if test="orderCode != null">
				order_code=#{orderCode},
			</if>
			<if test="orderTime != null">
				order_time=#{orderTime},
			</if>
			<if test="expireTime != null">
				expire_time#{expireTime},
			</if>
			<if test="createTime != null">
				create_time=#{createTime},
			</if>
			<if test="syncPayStatus != null">
				sync_pay_status=#{syncPayStatus},
				sync_pay_count=sync_pay_count+1,
			</if>
			<if test="orderPayTime != null">
				order_pay_time=#{orderPayTime},
			</if>
			<if test="syncTime != null">
				sync_time=#{syncTime},
			</if>
		</set>
		WHERE id = #{id}
	</update>

</mapper>
	