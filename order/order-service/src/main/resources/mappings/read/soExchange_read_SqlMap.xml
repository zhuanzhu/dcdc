<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.egeo.components.order.dao.read.SoExchangeReadDAO">
	<resultMap type="com.egeo.components.order.po.SoExchangePO" id="soExchangeMap">
		<result property="id" column="id" />
		<result property="returnId" column="return_id" />
		<result property="orderCode" column="order_code" />
		<result property="userId" column="user_id" />
		<result property="exchangeCode" column="exchange_code" />
		<result property="provinceId" column="province_id" />
		<result property="province" column="province" />
		<result property="cityId" column="city_id" />
		<result property="city" column="city" />
		<result property="countyId" column="county_id" />
		<result property="county" column="county" />
		<result property="areaId" column="area_id" />
		<result property="area" column="area" />
		<result property="consigneeAddress" column="consignee_address" />
		<result property="consigneeName" column="consignee_name" />
		<result property="consigneeMobile" column="consignee_mobile" />
		<result property="courierNumber" column="courier_number" />
		<result property="logisticsCompanyId" column="logistics_company_id" />
		<result property="exchangeStatus" column="exchange_status" />
		<result property="deliveryTime" column="delivery_time" />
		<result property="deliveryUserId" column="delivery_user_id" />
		<result property="confirmTime" column="confirm_time" />
		<result property="confirmUserId" column="confirm_user_id" />
		<result property="returnCode" column="return_code" />
		<result property="updateTime" column="update_time" />
		<result property="createTime" column="create_time" />
		<result property="platformId" column="platform_id" />
	</resultMap>

	<sql id="soExchangeColumns">
		id,
		return_id,
		order_code,
		user_id,
		exchange_code,
		province_id,
		province,
		city_id,
		city,
		county_id,
		county,
		area_id,
		area,
		consignee_address,
		consignee_name,
		consignee_mobile,
		courier_number,
		logistics_company_id,
		exchange_status,
		delivery_time,
		delivery_user_id,
		confirm_time,
		confirm_user_id,
		return_code,
		update_time,
		create_time,
		platform_id
	</sql>

	<select id="findById" parameterType="com.egeo.components.order.po.SoExchangePO" resultMap="soExchangeMap">
		SELECT
		<include refid="soExchangeColumns" />
		FROM so_exchange
		WHERE id = #{po.id}
	</select>

	<select id="findOfPage" resultMap="soExchangeMap">
		SELECT
		<include refid="soExchangeColumns" />
		FROM so_exchange
		<where>
			<if test="po.returnId != null">
				and return_id = #{po.returnId}
			</if>
			<if test="po.orderCode != null">
				and order_code = #{po.orderCode}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.exchangeCode != null">
				and exchange_code = #{po.exchangeCode}
			</if>
			<if test="po.provinceId != null">
				and province_id = #{po.provinceId}
			</if>
			<if test="po.province != null">
				and province = #{po.province}
			</if>
			<if test="po.cityId != null">
				and city_id = #{po.cityId}
			</if>
			<if test="po.city != null">
				and city = #{po.city}
			</if>
			<if test="po.countyId != null">
				and county_id = #{po.countyId}
			</if>
			<if test="po.county != null">
				and county = #{po.county}
			</if>
			<if test="po.areaId != null">
				and area_id = #{po.areaId}
			</if>
			<if test="po.area != null">
				and area = #{po.area}
			</if>
			<if test="po.consigneeAddress != null">
				and consignee_address = #{po.consigneeAddress}
			</if>
			<if test="po.consigneeName != null">
				and consignee_name = #{po.consigneeName}
			</if>
			<if test="po.consigneeMobile != null">
				and consignee_mobile = #{po.consigneeMobile}
			</if>
			<if test="po.courierNumber != null">
				and courier_number = #{po.courierNumber}
			</if>
			<if test="po.logisticsCompanyId != null">
				and logistics_company_id = #{po.logisticsCompanyId}
			</if>
			<if test="po.exchangeStatus != null">
				and exchange_status = #{po.exchangeStatus}
			</if>
			<if test="po.deliveryTime != null">
				and delivery_time = #{po.deliveryTime}
			</if>
			<if test="po.deliveryUserId != null">
				and delivery_user_id = #{po.deliveryUserId}
			</if>
			<if test="po.confirmTime != null">
				and confirm_time = #{po.confirmTime}
			</if>
			<if test="po.confirmUserId != null">
				and confirm_user_id = #{po.confirmUserId}
			</if>
			<if test="po.returnCode != null">
				and return_code = #{po.returnCode}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>		
			<otherwise>
				ORDER BY id desc		
			</otherwise>
		</choose>
		<if test="page != null">
		limit #{page.limitStart},#{page.pageSize}
		</if>
	</select>
	
	<select id="countOfPage" resultType="java.lang.Integer">
		SELECT
		count(1) cnt
		FROM so_exchange
		<where>
			<if test="po.returnId != null">
				and return_id = #{po.returnId}
			</if>
			<if test="po.orderCode != null">
				and order_code = #{po.orderCode}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.exchangeCode != null">
				and exchange_code = #{po.exchangeCode}
			</if>
			<if test="po.provinceId != null">
				and province_id = #{po.provinceId}
			</if>
			<if test="po.province != null">
				and province = #{po.province}
			</if>
			<if test="po.cityId != null">
				and city_id = #{po.cityId}
			</if>
			<if test="po.city != null">
				and city = #{po.city}
			</if>
			<if test="po.countyId != null">
				and county_id = #{po.countyId}
			</if>
			<if test="po.county != null">
				and county = #{po.county}
			</if>
			<if test="po.areaId != null">
				and area_id = #{po.areaId}
			</if>
			<if test="po.area != null">
				and area = #{po.area}
			</if>
			<if test="po.consigneeAddress != null">
				and consignee_address = #{po.consigneeAddress}
			</if>
			<if test="po.consigneeName != null">
				and consignee_name = #{po.consigneeName}
			</if>
			<if test="po.consigneeMobile != null">
				and consignee_mobile = #{po.consigneeMobile}
			</if>
			<if test="po.courierNumber != null">
				and courier_number = #{po.courierNumber}
			</if>
			<if test="po.logisticsCompanyId != null">
				and logistics_company_id = #{po.logisticsCompanyId}
			</if>
			<if test="po.exchangeStatus != null">
				and exchange_status = #{po.exchangeStatus}
			</if>
			<if test="po.deliveryTime != null">
				and delivery_time = #{po.deliveryTime}
			</if>
			<if test="po.deliveryUserId != null">
				and delivery_user_id = #{po.deliveryUserId}
			</if>
			<if test="po.confirmTime != null">
				and confirm_time = #{po.confirmTime}
			</if>
			<if test="po.confirmUserId != null">
				and confirm_user_id = #{po.confirmUserId}
			</if>
			<if test="po.returnCode != null">
				and return_code = #{po.returnCode}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
		</where>
	</select>
	
	<select id="findAll" resultMap="soExchangeMap">
		SELECT
		<include refid="soExchangeColumns" />
		FROM so_exchange
		<where>
			<if test="po.returnId != null">
				and return_id = #{po.returnId}
			</if>
			<if test="po.orderCode != null">
				and order_code = #{po.orderCode}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.exchangeCode != null">
				and exchange_code = #{po.exchangeCode}
			</if>
			<if test="po.provinceId != null">
				and province_id = #{po.provinceId}
			</if>
			<if test="po.province != null">
				and province = #{po.province}
			</if>
			<if test="po.cityId != null">
				and city_id = #{po.cityId}
			</if>
			<if test="po.city != null">
				and city = #{po.city}
			</if>
			<if test="po.countyId != null">
				and county_id = #{po.countyId}
			</if>
			<if test="po.county != null">
				and county = #{po.county}
			</if>
			<if test="po.areaId != null">
				and area_id = #{po.areaId}
			</if>
			<if test="po.area != null">
				and area = #{po.area}
			</if>
			<if test="po.consigneeAddress != null">
				and consignee_address = #{po.consigneeAddress}
			</if>
			<if test="po.consigneeName != null">
				and consignee_name = #{po.consigneeName}
			</if>
			<if test="po.consigneeMobile != null">
				and consignee_mobile = #{po.consigneeMobile}
			</if>
			<if test="po.courierNumber != null">
				and courier_number = #{po.courierNumber}
			</if>
			<if test="po.logisticsCompanyId != null">
				and logistics_company_id = #{po.logisticsCompanyId}
			</if>
			<if test="po.exchangeStatus != null">
				and exchange_status = #{po.exchangeStatus}
			</if>
			<if test="po.deliveryTime != null">
				and delivery_time = #{po.deliveryTime}
			</if>
			<if test="po.deliveryUserId != null">
				and delivery_user_id = #{po.deliveryUserId}
			</if>
			<if test="po.confirmTime != null">
				and confirm_time = #{po.confirmTime}
			</if>
			<if test="po.confirmUserId != null">
				and confirm_user_id = #{po.confirmUserId}
			</if>
			<if test="po.returnCode != null">
				and return_code = #{po.returnCode}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>			
			<otherwise>
				ORDER BY id desc		
			</otherwise>
		</choose>
	</select>
</mapper>
	