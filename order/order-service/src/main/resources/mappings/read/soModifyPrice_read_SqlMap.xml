<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.egeo.components.order.dao.read.SoModifyPriceReadDAO">
	<resultMap type="com.egeo.components.order.po.SoModifyPricePO" id="soModifyPriceMap">
		<result property="id" column="id" />
		<result property="userId" column="user_id" />
		<result property="orderCode" column="order_code" />
		<result property="parentOrderCode" column="parent_order_code" />
		<result property="orderAmount" column="order_amount" />
		<result property="orderBeforeAmount" column="order_before_amount" />
		<result property="orderDeliveryFee" column="order_delivery_fee" />
		<result property="orderBeforeDeliveryFee" column="order_before_delivery_fee" />
		<result property="auditStatus" column="audit_status" />
		<result property="commitUserId" column="commit_user_id" />
		<result property="commitUserName" column="commit_user_name" />
		<result property="commitTime" column="commit_time" />
		<result property="auditUserId" column="audit_user_id" />
		<result property="auditUserName" column="audit_user_name" />
		<result property="auditTime" column="audit_time" />
		<result property="auditReason" column="audit_reason" />
		<result property="goodReceiverName" column="good_receiver_name" />
		<result property="goodReceiverMobile" column="good_receiver_mobile" />
		<result property="goodReceiverPhone" column="good_receiver_phone" />
		<result property="platformId" column="platform_id" />
		<result property="merchantId" column="merchant_id" />
		<result property="updateTime" column="update_time" />
		<result property="createTime" column="create_time" />
	</resultMap>

	<sql id="soModifyPriceColumns">
		id,
		user_id,
		order_code,
		parent_order_code,
		order_amount,
		order_before_amount,
		order_delivery_fee,
		order_before_delivery_fee,
		audit_status,
		commit_user_id,
		commit_user_name,
		commit_time,
		audit_user_id,
		audit_user_name,
		audit_time,
		audit_reason,
		good_receiver_name,
		good_receiver_mobile,
		good_receiver_phone,
		platform_id,
		merchant_id,
		update_time,
		create_time
	</sql>

	<select id="findById" parameterType="com.egeo.components.order.po.SoModifyPricePO" resultMap="soModifyPriceMap">
		SELECT
		<include refid="soModifyPriceColumns" />
		FROM so_modify_price
		WHERE id = #{po.id}
	</select>

	<select id="findOfPage" resultMap="soModifyPriceMap">
		SELECT
		<include refid="soModifyPriceColumns" />
		FROM so_modify_price
		<where>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.orderCode != null">
				and order_code = #{po.orderCode}
			</if>
			<if test="po.parentOrderCode != null">
				and parent_order_code = #{po.parentOrderCode}
			</if>
			<if test="po.orderAmount != null">
				and order_amount = #{po.orderAmount}
			</if>
			<if test="po.orderBeforeAmount != null">
				and order_before_amount = #{po.orderBeforeAmount}
			</if>
			<if test="po.orderDeliveryFee != null">
				and order_delivery_fee = #{po.orderDeliveryFee}
			</if>
			<if test="po.orderBeforeDeliveryFee != null">
				and order_before_delivery_fee = #{po.orderBeforeDeliveryFee}
			</if>
			<if test="po.auditStatus != null">
				and audit_status = #{po.auditStatus}
			</if>
			<if test="po.commitUserId != null">
				and commit_user_id = #{po.commitUserId}
			</if>
			<if test="po.commitUserName != null">
				and commit_user_name = #{po.commitUserName}
			</if>
			<if test="po.commitTime != null">
				and commit_time = #{po.commitTime}
			</if>
			<if test="po.auditUserId != null">
				and audit_user_id = #{po.auditUserId}
			</if>
			<if test="po.auditUserName != null">
				and audit_user_name = #{po.auditUserName}
			</if>
			<if test="po.auditTime != null">
				and audit_time = #{po.auditTime}
			</if>
			<if test="po.auditReason != null">
				and audit_reason = #{po.auditReason}
			</if>
			<if test="po.goodReceiverName != null">
				and good_receiver_name = #{po.goodReceiverName}
			</if>
			<if test="po.goodReceiverMobile != null">
				and good_receiver_mobile = #{po.goodReceiverMobile}
			</if>
			<if test="po.goodReceiverPhone != null">
				and good_receiver_phone = #{po.goodReceiverPhone}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
			<if test="po.merchantId != null">
				and merchant_id = #{po.merchantId}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>		
			<otherwise>
				ORDER BY id desc		
			</otherwise>
		</choose>
		<if test="page != null">
		limit #{page.limitStart},#{page.pageSize}
		</if>
	</select>
	
	<select id="countOfPage" resultType="java.lang.Integer">
		SELECT
		count(1) cnt
		FROM so_modify_price
		<where>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.orderCode != null">
				and order_code = #{po.orderCode}
			</if>
			<if test="po.parentOrderCode != null">
				and parent_order_code = #{po.parentOrderCode}
			</if>
			<if test="po.orderAmount != null">
				and order_amount = #{po.orderAmount}
			</if>
			<if test="po.orderBeforeAmount != null">
				and order_before_amount = #{po.orderBeforeAmount}
			</if>
			<if test="po.orderDeliveryFee != null">
				and order_delivery_fee = #{po.orderDeliveryFee}
			</if>
			<if test="po.orderBeforeDeliveryFee != null">
				and order_before_delivery_fee = #{po.orderBeforeDeliveryFee}
			</if>
			<if test="po.auditStatus != null">
				and audit_status = #{po.auditStatus}
			</if>
			<if test="po.commitUserId != null">
				and commit_user_id = #{po.commitUserId}
			</if>
			<if test="po.commitUserName != null">
				and commit_user_name = #{po.commitUserName}
			</if>
			<if test="po.commitTime != null">
				and commit_time = #{po.commitTime}
			</if>
			<if test="po.auditUserId != null">
				and audit_user_id = #{po.auditUserId}
			</if>
			<if test="po.auditUserName != null">
				and audit_user_name = #{po.auditUserName}
			</if>
			<if test="po.auditTime != null">
				and audit_time = #{po.auditTime}
			</if>
			<if test="po.auditReason != null">
				and audit_reason = #{po.auditReason}
			</if>
			<if test="po.goodReceiverName != null">
				and good_receiver_name = #{po.goodReceiverName}
			</if>
			<if test="po.goodReceiverMobile != null">
				and good_receiver_mobile = #{po.goodReceiverMobile}
			</if>
			<if test="po.goodReceiverPhone != null">
				and good_receiver_phone = #{po.goodReceiverPhone}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
			<if test="po.merchantId != null">
				and merchant_id = #{po.merchantId}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
		</where>
	</select>
	
	<select id="findAll" resultMap="soModifyPriceMap">
		SELECT
		<include refid="soModifyPriceColumns" />
		FROM so_modify_price
		<where>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.orderCode != null">
				and order_code = #{po.orderCode}
			</if>
			<if test="po.parentOrderCode != null">
				and parent_order_code = #{po.parentOrderCode}
			</if>
			<if test="po.orderAmount != null">
				and order_amount = #{po.orderAmount}
			</if>
			<if test="po.orderBeforeAmount != null">
				and order_before_amount = #{po.orderBeforeAmount}
			</if>
			<if test="po.orderDeliveryFee != null">
				and order_delivery_fee = #{po.orderDeliveryFee}
			</if>
			<if test="po.orderBeforeDeliveryFee != null">
				and order_before_delivery_fee = #{po.orderBeforeDeliveryFee}
			</if>
			<if test="po.auditStatus != null">
				and audit_status = #{po.auditStatus}
			</if>
			<if test="po.commitUserId != null">
				and commit_user_id = #{po.commitUserId}
			</if>
			<if test="po.commitUserName != null">
				and commit_user_name = #{po.commitUserName}
			</if>
			<if test="po.commitTime != null">
				and commit_time = #{po.commitTime}
			</if>
			<if test="po.auditUserId != null">
				and audit_user_id = #{po.auditUserId}
			</if>
			<if test="po.auditUserName != null">
				and audit_user_name = #{po.auditUserName}
			</if>
			<if test="po.auditTime != null">
				and audit_time = #{po.auditTime}
			</if>
			<if test="po.auditReason != null">
				and audit_reason = #{po.auditReason}
			</if>
			<if test="po.goodReceiverName != null">
				and good_receiver_name = #{po.goodReceiverName}
			</if>
			<if test="po.goodReceiverMobile != null">
				and good_receiver_mobile = #{po.goodReceiverMobile}
			</if>
			<if test="po.goodReceiverPhone != null">
				and good_receiver_phone = #{po.goodReceiverPhone}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
			<if test="po.merchantId != null">
				and merchant_id = #{po.merchantId}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>			
			<otherwise>
				ORDER BY id desc		
			</otherwise>
		</choose>
	</select>
</mapper>
	