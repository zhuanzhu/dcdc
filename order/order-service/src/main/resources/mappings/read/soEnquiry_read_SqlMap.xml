<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.egeo.components.order.dao.read.SoEnquiryReadDAO">
	<resultMap type="com.egeo.components.order.po.SoEnquiryPO" id="soEnquiryMap">
		<result property="id" column="id" />
		<result property="enquiryCode" column="enquiry_code" />
		<result property="enquiryStatus" column="enquiry_status" />
		<result property="enquiryAuditStatus" column="enquiry_audit_status" />
		<result property="affirmStatus" column="affirm_status" />
		<result property="productId" column="product_id" />
		<result property="productName" column="product_name" />
		<result property="productPrice" column="product_price" />
		<result property="productNum" column="product_num" />
		<result property="userId" column="user_id" />
		<result property="userName" column="user_name" />
		<result property="userPhone" column="user_phone" />
		<result property="cId" column="c_id" />
		<result property="cName" column="c_name" />
		<result property="askTime" column="ask_time" />
		<result property="offerTime" column="offer_time" />
		<result property="enquiryRemarkUser" column="enquiry_remark_user" />
		<result property="enquiryRemarkC" column="enquiry_remark_c" />
		<result property="platformId" column="platform_id" />
		<result property="auditReason" column="audit_reason" />
		<result property="linkPhone" column="link_phone" />
		<result property="cancelReasonUser" column="cancel_reason_user" />
		<result property="cancelReasonC" column="cancel_reason_c" />
		<result property="orderCode" column="order_code" />
		<result property="merchantId" column="merchant_id" />
		<result property="merchantName" column="merchant_name" />
		<result property="enquiryRemarkCUser" column="enquiry_remark_c_user" />
		<result property="createTime" column="create_time" />
		<result property="updateTime" column="update_time" />
	</resultMap>

	<sql id="soEnquiryColumns">
		id,
		enquiry_code,
		enquiry_status,
		enquiry_audit_status,
		affirm_status,
		product_id,
		product_name,
		product_price,
		product_num,
		user_id,
		user_name,
		user_phone,
		c_id,
		c_name,
		ask_time,
		offer_time,
		enquiry_remark_user,
		enquiry_remark_c,
		platform_id,
		audit_reason,
		link_phone,
		cancel_reason_user,
		cancel_reason_c,
		order_code,
		merchant_id,
		merchant_name,
		enquiry_remark_c_user,
		create_time,
		update_time
	</sql>

	<select id="findById" parameterType="com.egeo.components.order.po.SoEnquiryPO" resultMap="soEnquiryMap">
		SELECT
		<include refid="soEnquiryColumns" />
		FROM so_enquiry
		WHERE id = #{po.id}
	</select>

	<select id="findOfPage" resultMap="soEnquiryMap">
		SELECT
		<include refid="soEnquiryColumns" />
		FROM so_enquiry
		<where>
			<if test="po.enquiryCode != null">
				and enquiry_code = #{po.enquiryCode}
			</if>
			<if test="po.enquiryStatus != null">
				and enquiry_status = #{po.enquiryStatus}
			</if>
			<if test="po.enquiryAuditStatus != null">
				and enquiry_audit_status = #{po.enquiryAuditStatus}
			</if>
			<if test="po.affirmStatus != null">
				and affirm_status = #{po.affirmStatus}
			</if>
			<if test="po.productId != null">
				and product_id = #{po.productId}
			</if>
			<if test="po.productName != null">
				and product_name = #{po.productName}
			</if>
			<if test="po.productPrice != null">
				and product_price = #{po.productPrice}
			</if>
			<if test="po.productNum != null">
				and product_num = #{po.productNum}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.userName != null">
				and user_name = #{po.userName}
			</if>
			<if test="po.userPhone != null">
				and user_phone = #{po.userPhone}
			</if>
			<if test="po.cId != null">
				and c_id = #{po.cId}
			</if>
			<if test="po.cName != null">
				and c_name = #{po.cName}
			</if>
			<if test="po.askTime != null">
				and ask_time = #{po.askTime}
			</if>
			<if test="po.offerTime != null">
				and offer_time = #{po.offerTime}
			</if>
			<if test="po.enquiryRemarkUser != null">
				and enquiry_remark_user = #{po.enquiryRemarkUser}
			</if>
			<if test="po.enquiryRemarkC != null">
				and enquiry_remark_c = #{po.enquiryRemarkC}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
			<if test="po.auditReason != null">
				and audit_reason = #{po.auditReason}
			</if>
			<if test="po.linkPhone != null">
				and link_phone = #{po.linkPhone}
			</if>
			<if test="po.cancelReasonUser != null">
				and cancel_reason_user = #{po.cancelReasonUser}
			</if>
			<if test="po.cancelReasonC != null">
				and cancel_reason_c = #{po.cancelReasonC}
			</if>
			<if test="po.orderCode != null">
				and order_code = #{po.orderCode}
			</if>
			<if test="po.merchantId != null">
				and merchant_id = #{po.merchantId}
			</if>
			<if test="po.merchantName != null">
				and merchant_name = #{po.merchantName}
			</if>
			<if test="po.enquiryRemarkCUser != null">
				and enquiry_remark_c_user = #{po.enquiryRemarkCUser}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>		
			<otherwise>
				ORDER BY id desc		
			</otherwise>
		</choose>
		<if test="page != null">
		limit #{page.limitStart},#{page.pageSize}
		</if>
	</select>
	
	<select id="countOfPage" resultType="java.lang.Integer">
		SELECT
		count(1) cnt
		FROM so_enquiry
		<where>
			<if test="po.enquiryCode != null">
				and enquiry_code = #{po.enquiryCode}
			</if>
			<if test="po.enquiryStatus != null">
				and enquiry_status = #{po.enquiryStatus}
			</if>
			<if test="po.enquiryAuditStatus != null">
				and enquiry_audit_status = #{po.enquiryAuditStatus}
			</if>
			<if test="po.affirmStatus != null">
				and affirm_status = #{po.affirmStatus}
			</if>
			<if test="po.productId != null">
				and product_id = #{po.productId}
			</if>
			<if test="po.productName != null">
				and product_name = #{po.productName}
			</if>
			<if test="po.productPrice != null">
				and product_price = #{po.productPrice}
			</if>
			<if test="po.productNum != null">
				and product_num = #{po.productNum}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.userName != null">
				and user_name = #{po.userName}
			</if>
			<if test="po.userPhone != null">
				and user_phone = #{po.userPhone}
			</if>
			<if test="po.cId != null">
				and c_id = #{po.cId}
			</if>
			<if test="po.cName != null">
				and c_name = #{po.cName}
			</if>
			<if test="po.askTime != null">
				and ask_time = #{po.askTime}
			</if>
			<if test="po.offerTime != null">
				and offer_time = #{po.offerTime}
			</if>
			<if test="po.enquiryRemarkUser != null">
				and enquiry_remark_user = #{po.enquiryRemarkUser}
			</if>
			<if test="po.enquiryRemarkC != null">
				and enquiry_remark_c = #{po.enquiryRemarkC}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
			<if test="po.auditReason != null">
				and audit_reason = #{po.auditReason}
			</if>
			<if test="po.linkPhone != null">
				and link_phone = #{po.linkPhone}
			</if>
			<if test="po.cancelReasonUser != null">
				and cancel_reason_user = #{po.cancelReasonUser}
			</if>
			<if test="po.cancelReasonC != null">
				and cancel_reason_c = #{po.cancelReasonC}
			</if>
			<if test="po.orderCode != null">
				and order_code = #{po.orderCode}
			</if>
			<if test="po.merchantId != null">
				and merchant_id = #{po.merchantId}
			</if>
			<if test="po.merchantName != null">
				and merchant_name = #{po.merchantName}
			</if>
			<if test="po.enquiryRemarkCUser != null">
				and enquiry_remark_c_user = #{po.enquiryRemarkCUser}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
		</where>
	</select>
	
	<select id="findAll" resultMap="soEnquiryMap">
		SELECT
		<include refid="soEnquiryColumns" />
		FROM so_enquiry
		<where>
			<if test="po.enquiryCode != null">
				and enquiry_code = #{po.enquiryCode}
			</if>
			<if test="po.enquiryStatus != null">
				and enquiry_status = #{po.enquiryStatus}
			</if>
			<if test="po.enquiryAuditStatus != null">
				and enquiry_audit_status = #{po.enquiryAuditStatus}
			</if>
			<if test="po.affirmStatus != null">
				and affirm_status = #{po.affirmStatus}
			</if>
			<if test="po.productId != null">
				and product_id = #{po.productId}
			</if>
			<if test="po.productName != null">
				and product_name = #{po.productName}
			</if>
			<if test="po.productPrice != null">
				and product_price = #{po.productPrice}
			</if>
			<if test="po.productNum != null">
				and product_num = #{po.productNum}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.userName != null">
				and user_name = #{po.userName}
			</if>
			<if test="po.userPhone != null">
				and user_phone = #{po.userPhone}
			</if>
			<if test="po.cId != null">
				and c_id = #{po.cId}
			</if>
			<if test="po.cName != null">
				and c_name = #{po.cName}
			</if>
			<if test="po.askTime != null">
				and ask_time = #{po.askTime}
			</if>
			<if test="po.offerTime != null">
				and offer_time = #{po.offerTime}
			</if>
			<if test="po.enquiryRemarkUser != null">
				and enquiry_remark_user = #{po.enquiryRemarkUser}
			</if>
			<if test="po.enquiryRemarkC != null">
				and enquiry_remark_c = #{po.enquiryRemarkC}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
			<if test="po.auditReason != null">
				and audit_reason = #{po.auditReason}
			</if>
			<if test="po.linkPhone != null">
				and link_phone = #{po.linkPhone}
			</if>
			<if test="po.cancelReasonUser != null">
				and cancel_reason_user = #{po.cancelReasonUser}
			</if>
			<if test="po.cancelReasonC != null">
				and cancel_reason_c = #{po.cancelReasonC}
			</if>
			<if test="po.orderCode != null">
				and order_code = #{po.orderCode}
			</if>
			<if test="po.merchantId != null">
				and merchant_id = #{po.merchantId}
			</if>
			<if test="po.merchantName != null">
				and merchant_name = #{po.merchantName}
			</if>
			<if test="po.enquiryRemarkCUser != null">
				and enquiry_remark_c_user = #{po.enquiryRemarkCUser}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>			
			<otherwise>
				ORDER BY id desc		
			</otherwise>
		</choose>
	</select>
</mapper>
	