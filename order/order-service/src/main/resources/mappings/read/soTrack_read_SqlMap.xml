<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.egeo.components.order.dao.read.SoTrackReadDAO">
	<resultMap type="com.egeo.components.order.po.SoTrackPO" id="soTrackMap">
		<result property="id" column="id" />
		<result property="orderCode" column="order_code" />
		<result property="orderCreateTime" column="order_create_time" />
		<result property="userId" column="user_id" />
		<result property="merchantId" column="merchant_id" />
		<result property="trackType" column="track_type" />
		<result property="operateNo" column="operate_no" />
		<result property="operateAttr" column="operate_attr" />
		<result property="operateContent" column="operate_content" />
		<result property="remark" column="remark" />
		<result property="operateType" column="operate_type" />
		<result property="operatorId" column="operator_id" />
		<result property="operatorName" column="operator_name" />
		<result property="sourceSystem" column="source_system" />
		<result property="trackLevel" column="track_level" />
		<result property="deliveryCompanyId" column="delivery_company_id" />
		<result property="deliveryCompanyName" column="delivery_company_name" />
		<result property="deliveryCompanyShortName" column="delivery_company_short_name" />
		<result property="deliveryCompanyUrl" column="delivery_company_url" />
		<result property="deliveryExpressNbr" column="delivery_express_nbr" />
		<result property="deliverierName" column="deliverier_name" />
		<result property="deliverierMobile" column="deliverier_mobile" />
		<result property="updateTime" column="update_time" />
		<result property="createTime" column="create_time" />
		<result property="platformId" column="platform_id" />
	</resultMap>

	<sql id="soTrackColumns">
		id,
		order_code,
		order_create_time,
		user_id,
		merchant_id,
		track_type,
		operate_no,
		operate_attr,
		operate_content,
		remark,
		operate_type,
		operator_id,
		operator_name,
		source_system,
		track_level,
		delivery_company_id,
		delivery_company_name,
		delivery_company_short_name,
		delivery_company_url,
		delivery_express_nbr,
		deliverier_name,
		deliverier_mobile,
		update_time,
		create_time,
		platform_id
	</sql>

	<select id="findById" parameterType="com.egeo.components.order.po.SoTrackPO" resultMap="soTrackMap">
		SELECT
		<include refid="soTrackColumns" />
		FROM so_track
		WHERE id = #{po.id}
	</select>

	<select id="findOfPage" resultMap="soTrackMap">
		SELECT
		<include refid="soTrackColumns" />
		FROM so_track
		<where>
			<if test="po.orderCode != null">
				and order_code = #{po.orderCode}
			</if>
			<if test="po.orderCreateTime != null">
				and order_create_time = #{po.orderCreateTime}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.merchantId != null">
				and merchant_id = #{po.merchantId}
			</if>
			<if test="po.trackType != null">
				and track_type = #{po.trackType}
			</if>
			<if test="po.operateNo != null">
				and operate_no = #{po.operateNo}
			</if>
			<if test="po.operateAttr != null">
				and operate_attr = #{po.operateAttr}
			</if>
			<if test="po.operateContent != null">
				and operate_content = #{po.operateContent}
			</if>
			<if test="po.remark != null">
				and remark = #{po.remark}
			</if>
			<if test="po.operateType != null">
				and operate_type = #{po.operateType}
			</if>
			<if test="po.operatorId != null">
				and operator_id = #{po.operatorId}
			</if>
			<if test="po.operatorName != null">
				and operator_name = #{po.operatorName}
			</if>
			<if test="po.sourceSystem != null">
				and source_system = #{po.sourceSystem}
			</if>
			<if test="po.trackLevel != null">
				and track_level = #{po.trackLevel}
			</if>
			<if test="po.deliveryCompanyId != null">
				and delivery_company_id = #{po.deliveryCompanyId}
			</if>
			<if test="po.deliveryCompanyName != null">
				and delivery_company_name = #{po.deliveryCompanyName}
			</if>
			<if test="po.deliveryCompanyShortName != null">
				and delivery_company_short_name = #{po.deliveryCompanyShortName}
			</if>
			<if test="po.deliveryCompanyUrl != null">
				and delivery_company_url = #{po.deliveryCompanyUrl}
			</if>
			<if test="po.deliveryExpressNbr != null">
				and delivery_express_nbr = #{po.deliveryExpressNbr}
			</if>
			<if test="po.deliverierName != null">
				and deliverier_name = #{po.deliverierName}
			</if>
			<if test="po.deliverierMobile != null">
				and deliverier_mobile = #{po.deliverierMobile}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>		
			<otherwise>
				ORDER BY id desc		
			</otherwise>
		</choose>
		<if test="page != null">
		limit #{page.limitStart},#{page.pageSize}
		</if>
	</select>
	
	<select id="countOfPage" resultType="java.lang.Integer">
		SELECT
		count(1) cnt
		FROM so_track
		<where>
			<if test="po.orderCode != null">
				and order_code = #{po.orderCode}
			</if>
			<if test="po.orderCreateTime != null">
				and order_create_time = #{po.orderCreateTime}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.merchantId != null">
				and merchant_id = #{po.merchantId}
			</if>
			<if test="po.trackType != null">
				and track_type = #{po.trackType}
			</if>
			<if test="po.operateNo != null">
				and operate_no = #{po.operateNo}
			</if>
			<if test="po.operateAttr != null">
				and operate_attr = #{po.operateAttr}
			</if>
			<if test="po.operateContent != null">
				and operate_content = #{po.operateContent}
			</if>
			<if test="po.remark != null">
				and remark = #{po.remark}
			</if>
			<if test="po.operateType != null">
				and operate_type = #{po.operateType}
			</if>
			<if test="po.operatorId != null">
				and operator_id = #{po.operatorId}
			</if>
			<if test="po.operatorName != null">
				and operator_name = #{po.operatorName}
			</if>
			<if test="po.sourceSystem != null">
				and source_system = #{po.sourceSystem}
			</if>
			<if test="po.trackLevel != null">
				and track_level = #{po.trackLevel}
			</if>
			<if test="po.deliveryCompanyId != null">
				and delivery_company_id = #{po.deliveryCompanyId}
			</if>
			<if test="po.deliveryCompanyName != null">
				and delivery_company_name = #{po.deliveryCompanyName}
			</if>
			<if test="po.deliveryCompanyShortName != null">
				and delivery_company_short_name = #{po.deliveryCompanyShortName}
			</if>
			<if test="po.deliveryCompanyUrl != null">
				and delivery_company_url = #{po.deliveryCompanyUrl}
			</if>
			<if test="po.deliveryExpressNbr != null">
				and delivery_express_nbr = #{po.deliveryExpressNbr}
			</if>
			<if test="po.deliverierName != null">
				and deliverier_name = #{po.deliverierName}
			</if>
			<if test="po.deliverierMobile != null">
				and deliverier_mobile = #{po.deliverierMobile}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
		</where>
	</select>
	
	<select id="findAll" resultMap="soTrackMap">
		SELECT
		<include refid="soTrackColumns" />
		FROM so_track
		<where>
			<if test="po.orderCode != null">
				and order_code = #{po.orderCode}
			</if>
			<if test="po.orderCreateTime != null">
				and order_create_time = #{po.orderCreateTime}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.merchantId != null">
				and merchant_id = #{po.merchantId}
			</if>
			<if test="po.trackType != null">
				and track_type = #{po.trackType}
			</if>
			<if test="po.operateNo != null">
				and operate_no = #{po.operateNo}
			</if>
			<if test="po.operateAttr != null">
				and operate_attr = #{po.operateAttr}
			</if>
			<if test="po.operateContent != null">
				and operate_content = #{po.operateContent}
			</if>
			<if test="po.remark != null">
				and remark = #{po.remark}
			</if>
			<if test="po.operateType != null">
				and operate_type = #{po.operateType}
			</if>
			<if test="po.operatorId != null">
				and operator_id = #{po.operatorId}
			</if>
			<if test="po.operatorName != null">
				and operator_name = #{po.operatorName}
			</if>
			<if test="po.sourceSystem != null">
				and source_system = #{po.sourceSystem}
			</if>
			<if test="po.trackLevel != null">
				and track_level = #{po.trackLevel}
			</if>
			<if test="po.deliveryCompanyId != null">
				and delivery_company_id = #{po.deliveryCompanyId}
			</if>
			<if test="po.deliveryCompanyName != null">
				and delivery_company_name = #{po.deliveryCompanyName}
			</if>
			<if test="po.deliveryCompanyShortName != null">
				and delivery_company_short_name = #{po.deliveryCompanyShortName}
			</if>
			<if test="po.deliveryCompanyUrl != null">
				and delivery_company_url = #{po.deliveryCompanyUrl}
			</if>
			<if test="po.deliveryExpressNbr != null">
				and delivery_express_nbr = #{po.deliveryExpressNbr}
			</if>
			<if test="po.deliverierName != null">
				and deliverier_name = #{po.deliverierName}
			</if>
			<if test="po.deliverierMobile != null">
				and deliverier_mobile = #{po.deliverierMobile}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>			
			<otherwise>
				ORDER BY id desc		
			</otherwise>
		</choose>
	</select>
</mapper>
	