<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.egeo.components.order.dao.read.SoRefundReadDAO">
	<resultMap type="com.egeo.components.order.po.SoRefundPO" id="soRefundMap">
		<result property="id" column="id" />
		<result property="soRefundCode" column="so_refund_code" />
		<result property="soId" column="so_id" />
		<result property="creatorId" column="creator_id" />
		<result property="fubiAccountBatchId" column="fubi_account_batch_id" />
		<result property="cashAccountBatchId" column="cash_account_batch_id" />
		<result property="soRefundByFubi" column="so_refund_by_fubi" />
		<result property="soRefundByCash" column="so_refund_by_cash" />
		<result property="soRefundReason" column="so_refund_reason" />
		<result property="remark" column="remark" />
		<result property="updateTime" column="update_time" />
		<result property="createTime" column="create_time" />
		<result property="userId" column="user_id" />
		<result property="platformId" column="platform_id" />
		<result property="thirdRefundCode" column="third_refund_code"/>
		<result property="bizId" column="biz_id"/>
		<result property="soRefundByJidian" column="so_refund_by_jidian"/>
		<result property="jidianAccountBatchId" column="jidian_account_batch_id"/>
		<result property="refundState" column="refund_state"/>
		<result property="soRefundByBuyCard" column="so_refund_by_buy_card"/>
		<result property="buyCardAccountBatchId" column="buy_card_account_batch_id"/>
	</resultMap>

	<sql id="soRefundColumns">
		id,
		so_refund_code,
		so_id,
		creator_id,
		fubi_account_batch_id,
		cash_account_batch_id,
		so_refund_by_fubi,
		so_refund_by_cash,
		so_refund_reason,
		remark,
		update_time,
		create_time,
		user_id,
		platform_id,
		third_refund_code,
		biz_id,
		so_refund_by_jidian,
		jidian_account_batch_id,
		refund_state,
		so_refund_by_buy_card,
		buy_card_account_batch_id
	</sql>

	<select id="findById" parameterType="com.egeo.components.order.po.SoRefundPO" resultMap="soRefundMap">
		SELECT
		<include refid="soRefundColumns" />
		FROM so_refund
		WHERE id = #{po.id}
	</select>

	<select id="findOfPage" resultMap="soRefundMap">
		SELECT
		<include refid="soRefundColumns" />
		FROM so_refund
		<where>
			<if test="po.soRefundCode != null">
				and so_refund_code = #{po.soRefundCode}
			</if>
			<if test="po.soId != null">
				and so_id = #{po.soId}
			</if>
			<if test="po.creatorId != null">
				and creator_id = #{po.creatorId}
			</if>
			<if test="po.fubiAccountBatchId != null">
				and fubi_account_batch_id = #{po.fubiAccountBatchId}
			</if>
			<if test="po.cashAccountBatchId != null">
				and cash_account_batch_id = #{po.cashAccountBatchId}
			</if>
			<if test="po.soRefundByFubi != null">
				and so_refund_by_fubi = #{po.soRefundByFubi}
			</if>
			<if test="po.soRefundByCash != null">
				and so_refund_by_cash = #{po.soRefundByCash}
			</if>
			<if test="po.soRefundReason != null">
				and so_refund_reason = #{po.soRefundReason}
			</if>
			<if test="po.remark != null">
				and remark = #{po.remark}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
			<if test="po.thirdRefundCode != null">
				and third_refund_code = #{po.thirdRefundCode}
			</if>
			<if test="po.bizId != null">
				and biz_id = #{po.bizId}
			</if>
			<if test="po.refundState != null">
				and refund_state = #{po.refundState}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY id desc
			</otherwise>
		</choose>
		<if test="page != null">
		limit #{page.limitStart},#{page.pageSize}
		</if>
	</select>

	<select id="countOfPage" resultType="java.lang.Integer">
		SELECT
		count(1) cnt
		FROM so_refund
		<where>
			<if test="po.soRefundCode != null">
				and so_refund_code = #{po.soRefundCode}
			</if>
			<if test="po.soId != null">
				and so_id = #{po.soId}
			</if>
			<if test="po.creatorId != null">
				and creator_id = #{po.creatorId}
			</if>
			<if test="po.fubiAccountBatchId != null">
				and fubi_account_batch_id = #{po.fubiAccountBatchId}
			</if>
			<if test="po.cashAccountBatchId != null">
				and cash_account_batch_id = #{po.cashAccountBatchId}
			</if>
			<if test="po.soRefundByFubi != null">
				and so_refund_by_fubi = #{po.soRefundByFubi}
			</if>
			<if test="po.soRefundByCash != null">
				and so_refund_by_cash = #{po.soRefundByCash}
			</if>
			<if test="po.soRefundReason != null">
				and so_refund_reason = #{po.soRefundReason}
			</if>
			<if test="po.remark != null">
				and remark = #{po.remark}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
			<if test="po.thirdRefundCode != null">
				and third_refund_code = #{po.thirdRefundCode}
			</if>
			<if test="po.bizId != null">
				and biz_id = #{po.bizId}
			</if>
			<if test="po.refundState != null">
				and refund_state = #{po.refundState}
			</if>
		</where>
	</select>

	<sql id="findOfPageByBlurrySql">
		<where>
			<if test="po.soRefundCode != null">
				and so_refund_code = #{po.soRefundCode}
			</if>
			<if test="po.soId != null">
				and so_id = #{po.soId}
			</if>
			<if test="po.creatorId != null">
				and creator_id = #{po.creatorId}
			</if>
			<if test="po.fubiAccountBatchId != null">
				and fubi_account_batch_id = #{po.fubiAccountBatchId}
			</if>
			<if test="po.cashAccountBatchId != null">
				and cash_account_batch_id = #{po.cashAccountBatchId}
			</if>
			<if test="po.soRefundByFubi != null">
				and so_refund_by_fubi = #{po.soRefundByFubi}
			</if>
			<if test="po.soRefundByCash != null">
				and so_refund_by_cash = #{po.soRefundByCash}
			</if>
			<if test="po.soRefundReason != null">
				and so_refund_reason = #{po.soRefundReason}
			</if>
			<if test="po.remark != null">
				and remark = #{po.remark}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
			<if test="po.thirdRefundCode != null">
				and third_refund_code = #{po.thirdRefundCode}
			</if>
			<if test="po.bizId != null">
				and biz_id = #{po.bizId}
			</if>
			<if test="userIdList != null">
				and user_id in
				<foreach collection="userIdList" item="userId" open="(" close=")" separator=",">
					#{userId}
				</foreach>
			</if>
			<if test="po.refundState != null">
				and refund_state = #{po.refundState}
			</if>
		</where>
	</sql>

	<select id="findOfPageByBlurry" resultMap="soRefundMap">
		SELECT
		<include refid="soRefundColumns" />
		FROM so_refund
		<include refid="findOfPageByBlurrySql" />
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY id desc
			</otherwise>
		</choose>
		<if test="page != null">
		limit #{page.limitStart},#{page.pageSize}
		</if>
	</select>

	<select id="countOfPageByBlurry" resultType="java.lang.Integer">
		SELECT
		count(1) cnt
		FROM so_refund
		<include refid="findOfPageByBlurrySql" />
	</select>

	<select id="findAll" resultMap="soRefundMap">
		SELECT
		<include refid="soRefundColumns" />
		FROM so_refund
		<where>
			<if test="po.soRefundCode != null">
				and so_refund_code = #{po.soRefundCode}
			</if>
			<if test="po.soId != null">
				and so_id = #{po.soId}
			</if>
			<if test="po.creatorId != null">
				and creator_id = #{po.creatorId}
			</if>
			<if test="po.fubiAccountBatchId != null">
				and fubi_account_batch_id = #{po.fubiAccountBatchId}
			</if>
			<if test="po.cashAccountBatchId != null">
				and cash_account_batch_id = #{po.cashAccountBatchId}
			</if>
			<if test="po.soRefundByFubi != null">
				and so_refund_by_fubi = #{po.soRefundByFubi}
			</if>
			<if test="po.soRefundByCash != null">
				and so_refund_by_cash = #{po.soRefundByCash}
			</if>
			<if test="po.soRefundReason != null">
				and so_refund_reason = #{po.soRefundReason}
			</if>
			<if test="po.remark != null">
				and remark = #{po.remark}
			</if>
			<if test="po.updateTime != null">
				and update_time = #{po.updateTime}
			</if>
			<if test="po.createTime != null">
				and create_time = #{po.createTime}
			</if>
			<if test="po.userId != null">
				and user_id = #{po.userId}
			</if>
			<if test="po.platformId != null">
				and platform_id = #{po.platformId}
			</if>
			<if test="po.thirdRefundCode != null">
				and third_refund_code = #{po.thirdRefundCode}
			</if>
			<if test="po.bizId != null">
				and biz_id = #{po.bizId}
			</if>
			<if test="po.refundState != null">
				and refund_state = #{po.refundState}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY id desc
			</otherwise>
		</choose>
	</select>
</mapper>
