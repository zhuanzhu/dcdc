<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.egeo.components.product.dao.write.ChannelProductBatchWriteDAO">
	<insert id="insert" parameterType="com.egeo.components.product.po.ChannelProductBatchPO">
		INSERT INTO channel_product_batch(
        <trim suffixOverrides=",">
			<if test="channelCode != null">
				channel_code,
			</if>
			<if test="productId != null">
				product_id,
			</if>
			<if test="linkSkuId != null">
				link_sku_id,
			</if>
			<if test="num != null">
				num,
			</if>
			<if test="batchNo != null">
				batch_no,
			</if>
			<if test="batchId != null">
				batch_id,
			</if>
			<if test="status != null">
				status,
			</if>
			<if test="specList != null">
				spec_list,
			</if>
			<if test="specNum != null">
				spec_num,
			</if>
			<if test="specName != null">
				spec_name,
			</if>
			<if test="expiredDate != null">
				expired_date,
			</if>
			<if test="makeDate != null">
				make_date,
			</if>
			<if test="price != null">
				price,
			</if>
			<if test="priceControl != null">
				price_control,
			</if>
			<if test="priceVip != null">
				price_vip,
			</if>
			<if test="priceSettleMent != null">
				price_settle_ment,
			</if>
			<if test="priceMarket != null">
				price_market,
			</if>
			<if test="isMinStockSpecificationItem != null">
				is_min_stock_specification_item,
			</if>
			<if test="platformId != null">
				platform_id,
			</if>
			<if test="createTime != null">
				create_time,
			</if>
			<if test="updateTime != null">
				update_time,
			</if>
        </trim>
		) VALUES (
        <trim suffixOverrides=",">
			<if test="channelCode != null">
				#{channelCode},
			</if>
			<if test="productId != null">
				#{productId},
			</if>
			<if test="linkSkuId != null">
				#{linkSkuId},
			</if>
			<if test="num != null">
				#{num},
			</if>
			<if test="batchNo != null">
				#{batchNo},
			</if>
			<if test="batchId != null">
				#{batchId},
			</if>
			<if test="status != null">
				#{status},
			</if>
			<if test="specList != null">
				#{specList},
			</if>
			<if test="specNum != null">
			#{specNum},
			</if>
			<if test="specName != null">
				#{specName},
			</if>
			<if test="expiredDate != null">
				#{expiredDate},
			</if>
			<if test="makeDate != null">
				#{makeDate},
			</if>
			<if test="price != null">
				#{price},
			</if>
			<if test="priceControl != null">
				#{priceControl},
			</if>
			<if test="priceVip != null">
				#{priceVip},
			</if>
			<if test="priceSettleMent != null">
				#{priceSettleMent},
			</if>
			<if test="priceMarket != null">
				#{priceMarket},
			</if>
			<if test="isMinStockSpecificationItem != null">
				#{isMinStockSpecificationItem},
			</if>
			<if test="platformId != null">
				#{platformId},
			</if>
			<if test="createTime != null">
				#{createTime},
			</if>
			<if test="updateTime != null">
				#{updateTime},
			</if>
        </trim>
		)
		<selectKey keyProperty="id" resultType="java.lang.Long">
			select LAST_INSERT_ID()
		</selectKey>
	</insert>

	<update id="update">
	UPDATE channel_product_batch
		<set>
			<if test="channelCode != null">
				channel_code = #{channelCode},
			</if>
			<if test="productId != null">
				product_id = #{productId},
			</if>
			<if test="linkSkuId != null">
				link_sku_id = #{linkSkuId},
			</if>
			<if test="num != null">
				num = #{num},
			</if>
			<if test="batchNo != null">
				batch_no = #{batchNo},
			</if>
			<if test="batchId != null">
				batch_id = #{batchId},
			</if>
			<if test="status != null">
				status = #{status},
			</if>
			<if test="specList != null">
				spec_list = #{specList},
			</if>
			<if test="specNum != null">
				spec_num = #{specNum},
			</if>
			<if test="specName != null">
				spec_name = #{specName},
			</if>
			<if test="specNum != null">
				spec_num = #{specNum},
			</if>
			<if test="expiredDate != null">
				expired_date = #{expiredDate},
			</if>
			<if test="makeDate != null">
				make_date = #{makeDate},
			</if>
			<if test="price != null">
				price = #{price},
			</if>
			<if test="priceControl != null">
				price_control = #{priceControl},
			</if>
			<if test="priceVip != null">
				price_vip = #{priceVip},
			</if>
			<if test="priceSettleMent != null">
				price_settle_ment = #{priceSettleMent},
			</if>
			<if test="priceMarket != null">
				price_market = #{priceMarket},
			</if>
			<if test="isMinStockSpecificationItem != null">
				is_min_stock_specification_item = #{isMinStockSpecificationItem},
			</if>
			<if test="platformId != null">
				platform_id = #{platformId},
			</if>
			<if test="createTime != null">
				create_time = #{createTime},
			</if>
			<if test="updateTime != null">
				update_time = #{updateTime},
			</if>
		</set>
			WHERE id = #{id}
	</update>

	<delete id="delete">
		delete from channel_product_batch where id = #{id}
	</delete>

	<delete id="deleteByPara">
		delete from channel_product_batch
		<where>
			<if test="channelCode != null">
				and channel_code = #{channelCode}
			</if>
			<if test="productId != null">
				and product_id = #{productId}
			</if>
			<if test="linkSkuId != null">
				and link_sku_id = #{linkSkuId}
			</if>
			<if test="num != null">
				and num = #{num}
			</if>
			<if test="batchNo != null">
				and batch_no = #{batchNo}
			</if>
			<if test="batchId != null">
				and batch_id = #{batchId}
			</if>
			<if test="status != null">
				and status = #{status}
			</if>
			<if test="specList != null">
				and spec_list = #{specList}
			</if>
			<if test="specNum != null">
				and spec_num = #{specNum}
			</if>
			<if test="specName != null">
				and spec_name = #{specName}
			</if>
			<if test="expiredDate != null">
				and expired_date = #{expiredDate}
			</if>
			<if test="makeDate != null">
				and make_date = #{makeDate}
			</if>
			<if test="platformId != null">
				and platform_id = #{platformId}
			</if>
			<if test="createTime != null">
				and create_time = #{createTime}
			</if>
			<if test="updateTime != null">
				and update_time = #{updateTime}
			</if>
		</where>
	</delete>

	<update id="updateChannelBatchSkuState">
		UPDATE channel_product_batch
		set `status` =0
		where
			channel_code = #{channelCode}
		<if test="skuIdList != null and skuIdList.size()>0">
			and link_sku_id in
			<foreach collection="skuIdList" item="id" open="(" separator="," close=")">
				#{id}
			</foreach>
		</if>
	</update>

</mapper>
