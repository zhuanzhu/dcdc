<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.egeo.components.product.dao.write.SkuWriteDAO">

	<insert id="saveSku" parameterType="com.egeo.components.product.po.SkuPO" >
		insert into sku (
		id,
		sku_serial_number,
		merchant_id,
		standard_product_unit_id,
		sku_name,
		is_available,
		is_valid,
		platform_id,
		external_sku_id

		)values
		<foreach collection="poList" item="po" separator="," >

			(#{po.id},
			#{po.skuSerialNumber},
			#{po.merchantId},
			#{po.standardProductUnitId},
			#{po.skuName},
			#{po.isAvailable},
			#{po.isValid},
			#{po.platformId},
			#{po.externalSkuId}

			)

		</foreach>
	</insert>

	<insert id="updateSkuList" parameterType="com.egeo.components.product.po.SkuPO" >
		insert into sku (
		id,
		sku_name,
		external_sku_id

		)values
		<foreach collection="poList" item="po" separator="," >

			(#{po.id},
			#{po.skuName},
			#{po.externalSkuId}

			)

		</foreach>
		on duplicate key update
		sku_name=VALUES (sku_name),
		external_sku_id=VALUES (external_sku_id)
	</insert>




	<insert id="insert" parameterType="com.egeo.components.product.po.SkuPO">
		INSERT INTO sku(
        <trim suffixOverrides=",">
			<if test="skuSerialNumber != null">
				sku_serial_number,
			</if>
			<if test="merchantId != null">
				merchant_id,
			</if>
			<if test="standardProductUnitId != null">
				standard_product_unit_id,
			</if>
			<if test="skuName != null">
				sku_name,
			</if>
			<if test="skuProductName != null">
				sku_product_name,
			</if>
			<if test="skuMarketPrice != null">
				sku_market_price,
			</if>
			<if test="skuCostingPrice != null">
				sku_costing_price,
			</if>
			<if test="remark != null">
				remark,
			</if>
			<if test="isAvailable != null">
				is_available,
			</if>
			<if test="code != null">
				code,
			</if>
			<if test="skuPicUrl != null">
				sku_pic_url,
			</if>
			<if test="createTime != null">
				create_time,
			</if>
			<if test="updateTime != null">
				update_time,
			</if>
			<if test="synchronizationTime != null">
				synchronization_time,
			</if>
			<if test="isValid != null">
				is_valid,
			</if>
			<if test="platformId != null">
				platform_id,
			</if>
			<if test="barCode != null">
				 bar_code,
			</if>
			<if test="externalSkuId != null">
				 external_sku_id,
			</if>
			<if test="taxRate != null">
				tax_rate,
			</if>
        </trim>		
		) VALUES (
        <trim suffixOverrides=",">
			<if test="skuSerialNumber != null">
				#{skuSerialNumber},
			</if>
			<if test="merchantId != null">
				#{merchantId},
			</if>
			<if test="standardProductUnitId != null">
				#{standardProductUnitId},
			</if>
			<if test="skuName != null">
				#{skuName},
			</if>
			<if test="skuProductName != null">
				#{skuProductName},
			</if>
			<if test="skuMarketPrice != null">
				#{skuMarketPrice},
			</if>
			<if test="skuCostingPrice != null">
				#{skuCostingPrice},
			</if>
			<if test="remark != null">
				#{remark},
			</if>
			<if test="isAvailable != null">
				#{isAvailable},
			</if>
			<if test="code != null">
				#{code},
			</if>
			<if test="skuPicUrl != null">
				#{skuPicUrl},
			</if>
			<if test="createTime != null">
				#{createTime},
			</if>
			<if test="updateTime != null">
				#{updateTime},
			</if>
			<if test="synchronizationTime != null">
				#{synchronizationTime},
			</if>
			<if test="isValid != null">
				#{isValid},
			</if>
			<if test="platformId != null">
				#{platformId},
			</if>
			<if test="barCode != null">
				 #{barCode},
			</if>
			<if test="externalSkuId != null">
				#{externalSkuId},
			</if>
			<if test="taxRate != null">
				#{taxRate},
			</if>
        </trim>		
		)
		<selectKey keyProperty="id" resultType="java.lang.Long">
			select LAST_INSERT_ID()
		</selectKey>
	</insert>


	
	
	<update id="update">
	UPDATE sku 
		<set>
			<if test="skuSerialNumber != null">
				sku_serial_number = #{skuSerialNumber},
			</if>			
			<if test="merchantId != null">
				merchant_id = #{merchantId},
			</if>			
			<if test="standardProductUnitId != null">
				standard_product_unit_id = #{standardProductUnitId},
			</if>			
			<if test="skuName != null">
				sku_name = #{skuName},
			</if>			
			<if test="skuProductName != null">
				sku_product_name = #{skuProductName},
			</if>			
			<if test="skuMarketPrice != null">
				sku_market_price = #{skuMarketPrice},
			</if>			
			<if test="skuCostingPrice != null">
				sku_costing_price = #{skuCostingPrice},
			</if>			
			<if test="remark != null">
				remark = #{remark},
			</if>			
			<if test="isAvailable != null">
				is_available = #{isAvailable},
			</if>			
			<if test="code != null">
				code = #{code},
			</if>			
			<if test="skuPicUrl != null">
				sku_pic_url = #{skuPicUrl},
			</if>			
			<if test="createTime != null">
				create_time = #{createTime},
			</if>			
			<if test="updateTime != null">
				update_time = #{updateTime},
			</if>			
			<if test="synchronizationTime != null">
				synchronization_time = #{synchronizationTime},
			</if>		
			<if test="isValid != null">
				is_valid = #{isValid},
			</if>		
			<if test="platformId != null">
				platform_id = #{platformId},
			</if>
			<if test="barCode != null">
				bar_code = #{barCode},
			</if>
			<if test="externalSkuId != null">
				external_sku_id= #{externalSkuId},
			</if>
			<if test="taxRate != null">
				tax_rate = #{taxRate},
			</if>
		</set>
			WHERE id = #{id}
	</update>	
	

	<delete id="delete">
		delete from sku where id = #{id}
	</delete>

	<delete id="deleteByPara">
		delete from sku 
		<where>
			<if test="skuSerialNumber != null">
				and sku_serial_number = #{skuSerialNumber}
			</if>
			<if test="merchantId != null">
				and merchant_id = #{merchantId}
			</if>
			<if test="standardProductUnitId != null">
				and standard_product_unit_id = #{standardProductUnitId}
			</if>
			<if test="skuName != null">
				and sku_name = #{skuName}
			</if>
			<if test="skuProductName != null">
				and sku_product_name = #{skuProductName}
			</if>
			<if test="skuMarketPrice != null">
				and sku_market_price = #{skuMarketPrice}
			</if>
			<if test="skuCostingPrice != null">
				and sku_costing_price = #{skuCostingPrice}
			</if>
			<if test="remark != null">
				and remark = #{remark}
			</if>
			<if test="isAvailable != null">
				and is_available = #{isAvailable}
			</if>
			<if test="code != null">
				and code = #{code}
			</if>
			<if test="skuPicUrl != null">
				and sku_pic_url = #{skuPicUrl}
			</if>
			<if test="createTime != null">
				and create_time = #{createTime}
			</if>
			<if test="updateTime != null">
				and update_time = #{updateTime}
			</if>
			<if test="synchronizationTime != null">
				and synchronization_time = #{synchronizationTime},
			</if>		
			<if test="isValid != null">
				and is_valid = #{isValid},
			</if>	
			<if test="platformId != null">
				and platform_id = #{platformId}
			</if>
			<if test="barCode != null">
				and bar_code = #{barCode}
			</if>
			<if test="externalSkuId != null">
				and external_sku_id= #{externalSkuId}
			</if>
		</where>
	</delete>
	<update id="updateSkuParamsWithTx" parameterType="com.egeo.components.product.po.SkuPO">
		UPDATE sku
		<set>
			<if test="po.skuSerialNumber != null">
				sku_serial_number = #{po.skuSerialNumber},
			</if>
			<if test="po.merchantId != null">
				merchant_id = #{po.merchantId},
			</if>
			<if test="po.standardProductUnitId != null">
				standard_product_unit_id = #{po.standardProductUnitId},
			</if>
			<if test="po.skuName != null">
				sku_name = #{po.skuName},
			</if>
			<if test="po.skuProductName != null">
				sku_product_name = #{po.skuProductName},
			</if>
			<if test="po.skuMarketPrice != null">
				sku_market_price = #{po.skuMarketPrice},
			</if>
			<if test="po.skuCostingPrice != null">
				sku_costing_price = #{po.skuCostingPrice},
			</if>
			<if test="po.remark != null">
				remark = #{po.remark},
			</if>
			<if test="po.isAvailable != null">
				is_available = #{po.isAvailable},
			</if>
			<if test="po.code != null">
				code = #{po.code},
			</if>
			<if test="po.skuPicUrl != null">
				sku_pic_url = #{po.skuPicUrl},
			</if>
			<if test="po.createTime != null">
				create_time = #{po.createTime},
			</if>
			<if test="po.updateTime != null">
				update_time = #{po.updateTime},
			</if>
			<if test="po.synchronizationTime != null">
				synchronization_time = #{po.synchronizationTime},
			</if>
			<if test="po.isValid != null">
				is_valid = #{po.isValid},
			</if>
			<if test="po.platformId != null">
				platform_id = #{po.platformId},
			</if>
			<if test="po.barCode != null">
				bar_code = #{po.barCode},
			</if>
			<if test="po.externalSkuId != null">
				external_sku_id= #{po.externalSkuId},
			</if>
			<if test="po.taxRate != null">
				tax_rate = #{po.taxRate},
			</if>

		</set>
		WHERE id = #{po.id}
	</update>


</mapper>
	