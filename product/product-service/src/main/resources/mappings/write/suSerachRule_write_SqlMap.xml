<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.egeo.components.product.dao.write.SuSerachRuleWriteDAO">

	<insert id="saveSuSerachRulet" parameterType="com.egeo.components.product.po.SuSerachRulePO" >
		insert into su_serach_rule(
		standard_unit_id,
		standard_unit_name

		)values
		<foreach collection="poList" item="po"  separator="," >
			(
			#{po.standardUnitId},
			#{po.standardUnitName}



			)
		</foreach>
	</insert>




	<insert id="insert" parameterType="com.egeo.components.product.po.SuSerachRulePO">
		INSERT INTO su_serach_rule(
        <trim suffixOverrides=",">
			<if test="standardUnitId != null">
				standard_unit_id,
			</if>
			<if test="standardUnitName != null">
				standard_unit_name,
			</if>
			<if test="standardUnitKeyword != null">
				standard_unit_keyword,
			</if>
			<if test="standardUnitTag != null">
				standard_unit_tag,
			</if>
			<if test="standardUnitCategory != null">
				standard_unit_category,
			</if>
			<if test="merchantId != null">
				merchant_id,
			</if>
			<if test="pictureUrl != null">
				picture_url,
			</if>
			<if test="companyId != null">
				company_id,
			</if>
			<if test="companyType != null">
				company_type,
			</if>
			<if test="clientId != null">
				client_id,
			</if>

        </trim>		
		) VALUES (
        <trim suffixOverrides=",">
			<if test="standardUnitId != null">
				#{standardUnitId},
			</if>
			<if test="standardUnitName != null">
				#{standardUnitName},
			</if>
			<if test="standardUnitKeyword != null">
				#{standardUnitKeyword},
			</if>
			<if test="standardUnitTag != null">
				#{standardUnitTag},
			</if>
			<if test="standardUnitCategory != null">
				#{standardUnitCategory},
			</if>
			<if test="merchantId != null">
				#{merchantId},
			</if>
			<if test="pictureUrl != null">
				#{pictureUrl},
			</if>
			<if test="companyId != null">
				#{companyId},
			</if>
			<if test="companyType != null">
				#{companyType},
			</if>
			<if test="clientId != null">
				#{clientId},
			</if>
        </trim>
		)
		<selectKey keyProperty="id" resultType="java.lang.Long">
			select LAST_INSERT_ID()
		</selectKey>
	</insert>




	<insert id="addSuSerachRuleList" >
		INSERT INTO su_serach_rule(
				standard_unit_id,
				standard_unit_name,
				standard_unit_keyword,
				standard_unit_tag,
				standard_unit_category,
				merchant_id,
				picture_url,
				company_id,
				company_type,
				client_id
		) VALUES
		<foreach collection="poList" item="po" separator=",">
			(#{po.standardUnitId},
				#{po.standardUnitName},
				#{po.standardUnitKeyword},
				#{po.standardUnitTag},
				#{po.standardUnitCategory},
				#{po.merchantId},
				#{po.pictureUrl},
				#{po.companyId},
				#{po.companyType},
				#{po.clientId})
		</foreach>

	</insert>


	
	
	<update id="update">
	UPDATE su_serach_rule 
		<set>
			<if test="standardUnitId != null">
				standard_unit_id = #{standardUnitId},
			</if>			
			<if test="standardUnitName != null">
				standard_unit_name = #{standardUnitName},
			</if>			
			<if test="standardUnitKeyword != null">
				standard_unit_keyword = #{standardUnitKeyword},
			</if>			
			<if test="standardUnitTag != null">
				standard_unit_tag = #{standardUnitTag},
			</if>			
			<if test="standardUnitCategory != null">
				standard_unit_category = #{standardUnitCategory},
			</if>
			<if test="merchantId != null">
				merchant_id=#{merchantId},
			</if>
			<if test="pictureUrl != null">
				picture_url=#{pictureUrl},
			</if>
			<if test="companyId != null">
				company_id=#{companyId},
			</if>
			<if test="companyType != null">
				company_type=#{companyType},
			</if>
			<if test="clientId != null">
				client_id=#{clientId},
			</if>
		</set>
			WHERE id = #{id}
	</update>	
	

	<delete id="delete">
		delete from su_serach_rule where id = #{id}
	</delete>

	<delete id="deleteByPara">
		delete from su_serach_rule 
		<where>
			<if test="standardUnitId != null">
				and standard_unit_id = #{standardUnitId}
			</if>
			<if test="standardUnitName != null">
				and standard_unit_name = #{standardUnitName}
			</if>
			<if test="standardUnitKeyword != null">
				and standard_unit_keyword = #{standardUnitKeyword}
			</if>
			<if test="standardUnitTag != null">
				and standard_unit_tag = #{standardUnitTag}
			</if>
			<if test="standardUnitCategory != null">
				and standard_unit_category = #{standardUnitCategory}
			</if>
		</where>
	</delete>
	
	<update id="updateSuSerachRuleBySuIdWithTx">
			UPDATE su_serach_rule
			<set>
				<if test="po.standardUnitName != null">
					standard_unit_name = #{po.standardUnitName},
				</if>
				<if test="po.standardUnitKeyword != null">
					standard_unit_keyword = #{po.standardUnitKeyword},
				</if>
				<if test="po.standardUnitTag != null">
					standard_unit_tag = #{po.standardUnitTag},
				</if>
				<if test="po.standardUnitCategory != null">
					standard_unit_category = #{po.standardUnitCategory},
				</if>
				<if test="po.merchantId != null">
					merchant_id=#{po.merchantId},
				</if>
				<if test="po.pictureUrl != null">
					picture_url=#{po.pictureUrl},
				</if>
				<if test="po.companyId != null">
					company_id=#{po.companyId},
				</if>
				<if test="po.companyType != null">
					company_type=#{po.companyType},
				</if>
				<if test="po.clientId != null">
					client_id=#{po.clientId},
				</if>
			</set>
			WHERE standard_unit_id = #{po.standardUnitId}


	</update>



	<update id="updateSuSerachRuleList">

		UPDATE su_serach_rule SET
			standard_unit_name = CASE standard_unit_id
				<foreach collection="poList" item="po" >
					WHEN #{po.standardUnitId}THEN #{po.standardUnitName}
				</foreach>
				  	END ,
			standard_unit_keyword= CASE standard_unit_id
				<foreach collection="poList" item="po" >
					WHEN #{po.standardUnitId}THEN #{po.standardUnitKeyword}
				</foreach>
				END ,
			standard_unit_tag= CASE standard_unit_id
				<foreach collection="poList" item="po" >
					WHEN #{po.standardUnitId}THEN #{po.standardUnitTag}
				</foreach>
				END ,
			standard_unit_category= CASE standard_unit_id
				<foreach collection="poList" item="po" >
					WHEN #{po.standardUnitId}THEN  #{po.standardUnitCategory}
				</foreach>
				END ,
			merchant_id= CASE standard_unit_id
				<foreach collection="poList" item="po" >
					WHEN #{po.standardUnitId}THEN  #{po.merchantId}
				</foreach>
				END ,
			picture_url= CASE standard_unit_id
				<foreach collection="poList" item="po" >
					WHEN #{po.standardUnitId}THEN  #{po.pictureUrl}
				</foreach>
				END ,
			company_id= CASE standard_unit_id
				<foreach collection="poList" item="po" >
					WHEN #{po.standardUnitId}THEN  #{po.companyId}
				</foreach>
				END ,
			company_type= CASE standard_unit_id
				<foreach collection="poList" item="po" >
					WHEN #{po.standardUnitId}THEN  #{po.companyType}
				</foreach>
				END ,
			client_id= CASE standard_unit_id
				<foreach collection="poList" item="po" >
					WHEN #{po.standardUnitId}THEN  #{po.clientId}
				</foreach>
				END
			WHERE standard_unit_id IN
				<foreach collection="poList" item="po" open="(" close=")" separator=",">
					#{po.standardUnitId}
				</foreach>



	</update>
</mapper>
	