<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.egeo.components.product.dao.write.ChannelProductSkuWriteDAO">
	<insert id="insert" parameterType="com.egeo.components.product.po.ChannelProductSkuPO">
		INSERT INTO channel_product_sku(
        <trim suffixOverrides=",">
			<if test="channelCode != null">
				channel_code,
			</if>
			<if test="productId != null">
				product_id,
			</if>
			<if test="skuSerialNumber != null">
				sku_serial_number,
			</if>
			<if test="merchantId != null">
				merchant_id,
			</if>
			<if test="standardProductUnitId != null">
				standard_product_unit_id,
			</if>
			<if test="skuName != null">
				sku_name,
			</if>
			<if test="skuProductName != null">
				sku_product_name,
			</if>
			<if test="skuPrice != null">
				sku_price,
			</if>
			<if test="skuMarketPrice != null">
				sku_market_price,
			</if>
			<if test="skuCostingPrice != null">
				sku_costing_price,
			</if>
			<if test="remark != null">
				remark,
			</if>
			<if test="isAvailable != null">
				is_available,
			</if>
			<if test="isValid != null">
				is_valid,
			</if>
			<if test="code != null">
				code,
			</if>
			<if test="skuPicUrl != null">
				sku_pic_url,
			</if>
			<if test="synchronizationTime != null">
				synchronization_time,
			</if>
			<if test="platformId != null">
				platform_id,
			</if>
			<if test="externalSkuId != null">
				external_sku_id,
			</if>
			<if test="barCode != null">
				bar_code,
			</if>
			<if test="skuCode != null">
				sku_code,
			</if>
			<if test="createTime != null">
				create_time,
			</if>
			<if test="updateTime != null">
				update_time,
			</if>
			<if test="taxRate != null">
				tax_rate,
			</if>
			<if test="hasRate != null">
				has_rate,
			</if>
			<if test="storeListText != null">
				store_list_text,
			</if>
			<if test="state != null">
				`state`,
			</if>
        </trim>
		) VALUES (
        <trim suffixOverrides=",">
			<if test="channelCode != null">
				#{channelCode},
			</if>
			<if test="productId != null">
				#{productId},
			</if>
			<if test="skuSerialNumber != null">
				#{skuSerialNumber},
			</if>
			<if test="merchantId != null">
				#{merchantId},
			</if>
			<if test="standardProductUnitId != null">
				#{standardProductUnitId},
			</if>
			<if test="skuName != null">
				#{skuName},
			</if>
			<if test="skuProductName != null">
				#{skuProductName},
			</if>
			<if test="skuPrice != null">
				#{skuPrice},
			</if>
			<if test="skuMarketPrice != null">
				#{skuMarketPrice},
			</if>
			<if test="skuCostingPrice != null">
				#{skuCostingPrice},
			</if>
			<if test="remark != null">
				#{remark},
			</if>
			<if test="isAvailable != null">
				#{isAvailable},
			</if>
			<if test="isValid != null">
				#{isValid},
			</if>
			<if test="code != null">
				#{code},
			</if>
			<if test="skuPicUrl != null">
				#{skuPicUrl},
			</if>
			<if test="synchronizationTime != null">
				#{synchronizationTime},
			</if>
			<if test="platformId != null">
				#{platformId},
			</if>
			<if test="externalSkuId != null">
				#{externalSkuId},
			</if>
			<if test="barCode != null">
				#{barCode},
			</if>
			<if test="skuCode != null">
				#{skuCode},
			</if>
			<if test="createTime != null">
				#{createTime},
			</if>
			<if test="updateTime != null">
				#{updateTime},
			</if>
			<if test="taxRate != null">
				#{taxRate},
			</if>
			<if test="hasRate != null">
				#{hasRate},
			</if>
			<if test="storeListText != null">
				#{storeListText},
			</if>
			<if test="state != null">
				#{state},
			</if>
        </trim>
		)
		<selectKey keyProperty="id" resultType="java.lang.Long">
			select LAST_INSERT_ID()
		</selectKey>
	</insert>




	<update id="update">
	UPDATE channel_product_sku
		<set>
			<if test="channelCode != null">
				channel_code = #{channelCode},
			</if>
			<if test="productId != null">
				product_id = #{productId},
			</if>
			<if test="skuSerialNumber != null">
				sku_serial_number = #{skuSerialNumber},
			</if>

			<if test="merchantId != null">
				merchant_id = #{merchantId},
			</if>
			<if test="standardProductUnitId != null">
				standard_product_unit_id = #{standardProductUnitId},
			</if>

			<if test="skuName != null">
				sku_name = #{skuName},
			</if>
			<if test="skuProductName != null">
				sku_product_name = #{skuProductName},
			</if>
			<if test="skuPrice != null">
				sku_price = #{skuPrice},
			</if>
			<if test="skuMarketPrice != null">
				sku_market_price = #{skuMarketPrice},
			</if>
			<if test="skuCostingPrice != null">
				sku_costing_price = #{skuCostingPrice},
			</if>
			<if test="remark != null">
				remark = #{remark},
			</if>
			<if test="isAvailable != null">
				is_available = #{isAvailable},
			</if>
			<if test="isValid != null">
				is_valid = #{isValid},
			</if>
			<if test="code != null">
				code = #{code},
			</if>
			<if test="skuPicUrl != null">
				sku_pic_url = #{skuPicUrl},
			</if>
			<if test="synchronizationTime != null">
				synchronization_time = #{synchronizationTime},
			</if>
			<if test="platformId != null">
				platform_id = #{platformId},
			</if>
			<if test="externalSkuId != null">
				external_sku_id = #{externalSkuId},
			</if>
			<if test="barCode != null">
				bar_code = #{barCode},
			</if>
			<if test="skuCode != null">
				sku_code = #{skuCode},
			</if>
			<if test="createTime != null">
				create_time = #{createTime},
			</if>
			<if test="updateTime != null">
				update_time = #{updateTime},
			</if>
			<if test="taxRate != null">
				tax_rate = #{taxRate},
			</if>
			<if test="hasRate != null">
				has_rate = #{hasRate},
			</if>
			<if test="storeListText != null">
				store_list_text = #{storeListText},
			</if>
			<if test="state != null">
				`state` = #{state},
			</if>
		</set>
			WHERE id = #{id}
	</update>

	<delete id="delete">
		delete from channel_product_sku where id = #{id}
	</delete>

	<delete id="deleteByPara">
		delete from channel_product_sku
		<where>
			<if test="channelCode != null">
				and channel_code = #{channelCode}
			</if>
			<if test="productId != null">
				and product_id = #{productId}
			</if>
			<if test="skuSerialNumber != null">
				and sku_serial_number = #{skuSerialNumber}
			</if>

			<if test="merchantId != null">
				and merchant_id = #{merchantId}
			</if>
			<if test="standardProductUnitId != null">
				and standard_product_unit_id = #{standardProductUnitId}
			</if>
			<if test="skuName != null">
				and sku_name = #{skuName}
			</if>
			<if test="skuProductName != null">
				and sku_product_name = #{skuProductName}
			</if>
			<if test="skuMarketPrice != null">
				and sku_market_price = #{skuMarketPrice}
			</if>
			<if test="skuCostingPrice != null">
				and sku_costing_price = #{skuCostingPrice}
			</if>
			<if test="remark != null">
				and remark = #{remark}
			</if>
			<if test="isAvailable != null">
				and is_available = #{isAvailable}
			</if>
			<if test="isValid != null">
				and is_valid = #{isValid}
			</if>
			<if test="code != null">
				and code = #{code}
			</if>
			<if test="skuPicUrl != null">
				and sku_pic_url = #{skuPicUrl}
			</if>
			<if test="synchronizationTime != null">
				and synchronization_time = #{synchronizationTime}
			</if>
			<if test="platformId != null">
				and platform_id = #{platformId}
			</if>
			<if test="externalSkuId != null">
				and external_sku_id = #{externalSkuId}
			</if>
			<if test="barCode != null">
				and bar_code = #{barCode}
			</if>
			<if test="skuCode != null">
				and sku_code = #{skuCode}
			</if>
			<if test="createTime != null">
				and create_time = #{createTime}
			</if>
			<if test="updateTime != null">
				and update_time = #{updateTime}
			</if>
		</where>
	</delete>
	<update id="updateChannelProductSkuState">
		UPDATE channel_product_sku
		    set `state` =0
		WHERE
				channel_code = #{channelCode}
		   <if test="skuIdList != null and skuIdList.size()>0">
			  and  external_sku_id in
			   <foreach collection="skuIdList" item="id" open="(" separator="," close=")">
				   #{id}
			   </foreach>
		   </if>
	</update>

</mapper>
