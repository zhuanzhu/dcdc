<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.egeo.components.finance.dao.write.SoJdWriteDAO">

	<update id="orderRefund">
		update so_jd
		<set>
			<if test="po.orderConfirmStatus != null">
				order_confirm_status = #{po.orderConfirmStatus},
			</if>
			<if test="po.orderPayStatus != null">
				order_pay_status = #{po.orderPayStatus},
			</if>
			<if test="po.orderStatus != null">
				order_status = #{po.orderStatus},
			</if>
			<if test="po.refundFubi != null">
				refund_fubi = refund_fubi + #{po.refundFubi},
			</if>
			<if test="po.refundCash != null">
				refund_cash = refund_cash + #{po.refundCash},
			</if>
		</set>
		where id=#{po.id}
	</update>

	<update id="deleteByOrderCode">
		update so_jd
		set order_delete_status=#{deleteStatus}
		where order_code=#{orderCode}
		and user_id=#{userId}
	</update>
	<update id="updateSoPayByFuBi">
		update so_jd
		set order_paid_by_fubi=#{soFreezeBalance}
		where id=#{orderId}
	</update>

	<update id="updateOrderStatusById">
		update so_jd
		<set>
			<if test="status!=null">
				order_status=#{status},
			</if>
			<if test="confirmStatus!=null">
				order_confirm_status=#{confirmStatus},
			</if>
			<if test="payStatus!=null">
				order_pay_status=#{payStatus},
			</if>
			<if test="deliveryStatus!=null">
				delivery_status=#{deliveryStatus},
			</if>
			<if test="limitCashPayAmount!=null">
				limit_cash_pay_amount=#{limitCashPayAmount},
			</if>
		</set>
		where id=#{id}
	</update>

	<update id="updateOrderStatus">
		update so_jd
		<set>
			<if test="status!=null">
				order_status=#{status},
			</if>
			<if test="confirmStatus!=null">
				order_confirm_status=#{confirmStatus},
			</if>
			<if test="payStatus!=null">
				order_pay_status=#{payStatus},
			</if>
			<if test="deliveryStatus!=null">
				delivery_status=#{deliveryStatus},
			</if>
			<if test="limitCashPayAmount!=null">
				limit_cash_pay_amount=#{limitCashPayAmount},
			</if>
		</set>
		where order_code=#{orderCode}
	</update>
	<update id="updateOrderCancelStatus">
		update so_jd
		<set>
			order_cancel_status=1
		</set>
		where order_code=#{orderCode}
		AND order_cancel_status is NULL

	</update>
	<update id="updateOrderCancelOverStatusByOrderCode">
		update so_jd
		<set>
			order_cancel_status=NULL
		</set>
		where order_code=#{orderCode}
	</update>

	<insert id="insert" parameterType="com.egeo.components.finance.po.SoJdPO">
		INSERT INTO so_jd(
		<trim suffixOverrides=",">
			<if test="orderCode != null">
				order_code,
			</if>
			<if test="userId != null">
				user_id,
			</if>
			<if test="orderAmount != null">
				order_amount,
			</if>
			<if test="orderAmountPay != null">
				order_amount_pay,
			</if>
			<if test="productAmount != null">
				product_amount,
			</if>
			<if test="orderStatus != null">
				order_status,
			</if>
			<if test="orderConfirmStatus != null">
				order_confirm_status,
			</if>
			<if test="orderPayStatus != null">
				order_pay_status,
			</if>
			<if test="orderAutoCompleteDate != null">
				order_auto_complete_date,
			</if>
			<if test="orderPaymentConfirmDate != null">
				order_payment_confirm_date,
			</if>
			<if test="orderPaymentConfirmType != null">
				order_payment_confirm_type,
			</if>
			<if test="orderDeliveryFee != null">
				order_delivery_fee,
			</if>
			<if test="orderDeliveryFeeInsuranceType != null">
				order_delivery_fee_insurance_type,
			</if>
			<if test="orderDeliveryFeeInsuranceAmount != null">
				order_delivery_fee_insurance_amount,
			</if>
			<if test="cashPayType != null">
				cash_pay_type,
			</if>
			<if test="orderPaidByCash != null">
				order_paid_by_cash,
			</if>
			<if test="couponDiscount != null">
				coupon_discount,
			</if>
			<if test="orderPaidByCard != null">
				order_paid_by_card,
			</if>
			<if test="orderPaidByRebate != null">
				order_paid_by_rebate,
			</if>
			<if test="orderPaidByFubi != null">
				order_paid_by_fubi,
			</if>
			<if test="useFubi != null">
				use_fubi,
			</if>
			<if test="orderPromotionDiscount != null">
				order_promotion_discount,
			</if>
			<if test="orderGivePoints != null">
				order_give_points,
			</if>
			<if test="deliveryFee != null">
				delivery_fee,
			</if>
			<if test="cancelReason != null">
				cancel_reason,
			</if>
			<if test="orderCancelDate != null">
				order_cancel_date,
			</if>
			<if test="orderCanceOperateType != null">
				order_cance_operate_type,
			</if>
			<if test="orderChannel != null">
				order_channel,
			</if>
			<if test="invoiceId != null">
				invoice_id,
			</if>
			<if test="orderDeleteStatus != null">
				order_delete_status,
			</if>
			<if test="paidOnlineThreshold != null">
				paid_online_threshold,
			</if>
			<if test="receiverAddressId != null">
				receiver_address_id,
			</if>
			<if test="modifiedAddress != null">
				modified_address,
			</if>
			<if test="modifyAddressTime != null">
				modify_address_time,
			</if>
			<if test="incrementTaxAmount != null">
				increment_tax_amount,
			</if>
			<if test="customsDutiesAmount != null">
				customs_duties_amount,
			</if>
			<if test="deliveryEndtime != null">
				delivery_endtime,
			</if>
			<if test="deliveryStatus != null">
				delivery_status,
			</if>
			<if test="lastOperatorId != null">
				last_operator_id,
			</if>
			<if test="refundTime != null">
				refund_time,
			</if>
			<if test="remark != null">
				remark,
			</if>
			<if test="createTime != null">
				create_time,
			</if>
			<if test="updateTime != null">
				update_time,
			</if>
			<if test="platformId != null">
				platform_id,
			</if>
			<if test="refundCash != null">
				refund_cash,
			</if>
			<if test="refundFubi != null">
				refund_fubi,
			</if>
			<if test="companyId != null">
				company_id,
			</if>
			<if test="signPlatform != null">
				sign_platform,
			</if>
			<if test="saleWay != null">
				sale_way,
			</if>
			<if test="storeId!= null">
				store_id,
			</if>
			<if test="couponUnitId!= null">
				coupon_unit_id,
			</if>
			<if test="storeDiscount != null">
				store_discount,
			</if>
			<if test="deliveryFeeDiscount != null">
				delivery_fee_discount,
			</if>
			<if test="limitCashPayAmount != null">
				limit_cash_pay_amount,
			</if>
			<if test="limitFuBiPayAmount != null">
				limit_fubi_pay_amount,
			</if>
			<if test="ledgerPlateform != null">
				ledger_plateform,
			</if>
			<if test="ledgerEnterprise != null">
				ledger_enterprise,
			</if>

		</trim>
		) VALUES (
		<trim suffixOverrides=",">
			<if test="orderCode != null">
				#{orderCode},
			</if>
			<if test="userId != null">
				#{userId},
			</if>
			<if test="orderAmount != null">
				#{orderAmount},
			</if>
			<if test="orderAmountPay != null">
				#{orderAmountPay},
			</if>
			<if test="productAmount != null">
				#{productAmount},
			</if>
			<if test="orderStatus != null">
				#{orderStatus},
			</if>
			<if test="orderConfirmStatus != null">
				#{orderConfirmStatus},
			</if>
			<if test="orderPayStatus != null">
				#{orderPayStatus},
			</if>
			<if test="orderAutoCompleteDate != null">
				#{orderAutoCompleteDate},
			</if>
			<if test="orderPaymentConfirmDate != null">
				#{orderPaymentConfirmDate},
			</if>
			<if test="orderPaymentConfirmType != null">
				#{orderPaymentConfirmType},
			</if>
			<if test="orderDeliveryFee != null">
				#{orderDeliveryFee},
			</if>
			<if test="orderDeliveryFeeInsuranceType != null">
				#{orderDeliveryFeeInsuranceType},
			</if>
			<if test="orderDeliveryFeeInsuranceAmount != null">
				#{orderDeliveryFeeInsuranceAmount},
			</if>
			<if test="cashPayType != null">
				#{cashPayType},
			</if>
			<if test="orderPaidByCash != null">
				#{orderPaidByCash},
			</if>
			<if test="couponDiscount != null">
				#{couponDiscount},
			</if>
			<if test="orderPaidByCard != null">
				#{orderPaidByCard},
			</if>
			<if test="orderPaidByRebate != null">
				#{orderPaidByRebate},
			</if>
			<if test="orderPaidByFubi != null">
				#{orderPaidByFubi},
			</if>
			<if test="useFubi != null">
				#{useFubi},
			</if>
			<if test="orderPromotionDiscount != null">
				#{orderPromotionDiscount},
			</if>
			<if test="orderGivePoints != null">
				#{orderGivePoints},
			</if>
			<if test="deliveryFee != null">
				#{deliveryFee},
			</if>
			<if test="cancelReason != null">
				#{cancelReason},
			</if>
			<if test="orderCancelDate != null">
				#{orderCancelDate},
			</if>
			<if test="orderCanceOperateType != null">
				#{orderCanceOperateType},
			</if>
			<if test="orderChannel != null">
				#{orderChannel},
			</if>
			<if test="invoiceId != null">
				#{invoiceId},
			</if>
			<if test="orderDeleteStatus != null">
				#{orderDeleteStatus},
			</if>
			<if test="paidOnlineThreshold != null">
				#{paidOnlineThreshold},
			</if>
			<if test="receiverAddressId != null">
				#{receiverAddressId},
			</if>
			<if test="modifiedAddress != null">
				#{modifiedAddress},
			</if>
			<if test="modifyAddressTime != null">
				#{modifyAddressTime},
			</if>
			<if test="incrementTaxAmount != null">
				#{incrementTaxAmount},
			</if>
			<if test="customsDutiesAmount != null">
				#{customsDutiesAmount},
			</if>
			<if test="deliveryEndtime != null">
				#{deliveryEndtime},
			</if>
			<if test="deliveryStatus != null">
				#{deliveryStatus},
			</if>
			<if test="lastOperatorId != null">
				#{lastOperatorId},
			</if>
			<if test="refundTime != null">
				#{refundTime},
			</if>
			<if test="remark != null">
				#{remark},
			</if>
			<if test="createTime != null">
				#{createTime},
			</if>
			<if test="updateTime != null">
				#{updateTime},
			</if>
			<if test="platformId != null">
				#{platformId},
			</if>
			<if test="refundCash != null">
				#{refundCash},
			</if>
			<if test="refundFubi != null">
				#{refundFubi},
			</if>
			<if test="companyId != null">
				#{companyId},
			</if>
			<if test="signPlatform != null">
				#{signPlatform},
			</if>
			<if test="saleWay != null">
				#{saleWay},
			</if>
			<if test="storeId!= null">
				#{storeId},
			</if>
			<if test="couponUnitId!= null">
				#{couponUnitId},
			</if>
			<if test="storeDiscount != null">
				#{storeDiscount},
			</if>
			<if test="deliveryFeeDiscount != null">
				#{deliveryFeeDiscount},
			</if>
			<if test="limitCashPayAmount != null">
				#{limitCashPayAmount},
			</if>
			<if test="limitFuBiPayAmount != null">
				#{limitFuBiPayAmount},
			</if>
			<if test="ledgerPlateform != null">
				#{ledgerPlateform},
			</if>
			<if test="ledgerEnterprise != null">
				#{ledgerEnterprise},
			</if>
		</trim>
		)
		<selectKey keyProperty="id" resultType="java.lang.Long">
			select
			LAST_INSERT_ID()
		</selectKey>
	</insert>




	<update id="update">
		UPDATE so_jd
		<set>
			<if test="orderCode != null">
				order_code = #{orderCode},
			</if>
			<if test="userId != null">
				user_id = #{userId},
			</if>
			<if test="orderAmount != null">
				order_amount = #{orderAmount},
			</if>
			<if test="orderAmountPay != null">
				order_amount_pay = #{orderAmountPay},
			</if>
			<if test="productAmount != null">
				product_amount = #{productAmount},
			</if>
			<if test="orderStatus != null">
				order_status = #{orderStatus},
			</if>
			<if test="orderConfirmStatus != null">
				order_confirm_status = #{orderConfirmStatus},
			</if>
			<if test="orderPayStatus != null">
				order_pay_status = #{orderPayStatus},
			</if>
			<if test="orderAutoCompleteDate != null">
				order_auto_complete_date = #{orderAutoCompleteDate},
			</if>
			<if test="orderPaymentConfirmDate != null">
				order_payment_confirm_date = #{orderPaymentConfirmDate},
			</if>
			<if test="orderPaymentConfirmType != null">
				order_payment_confirm_type = #{orderPaymentConfirmType},
			</if>
			<if test="orderDeliveryFee != null">
				order_delivery_fee = #{orderDeliveryFee},
			</if>
			<if test="orderDeliveryFeeInsuranceType != null">
				order_delivery_fee_insurance_type =
				#{orderDeliveryFeeInsuranceType},
			</if>
			<if test="orderDeliveryFeeInsuranceAmount != null">
				order_delivery_fee_insurance_amount =
				#{orderDeliveryFeeInsuranceAmount},
			</if>
			<if test="cashPayType != null">
				cash_pay_type = #{cashPayType},
			</if>
			<if test="orderPaidByCash != null">
				order_paid_by_cash = #{orderPaidByCash},
			</if>
			<if test="couponDiscount != null">
				coupon_discount = #{couponDiscount},
			</if>
			<if test="orderPaidByCard != null">
				order_paid_by_card = #{orderPaidByCard},
			</if>
			<if test="orderPaidByRebate != null">
				order_paid_by_rebate = #{orderPaidByRebate},
			</if>
			<if test="orderPaidByFubi != null">
				order_paid_by_fubi = #{orderPaidByFubi},
			</if>
			<if test="useFubi != null">
				use_fubi = #{useFubi},
			</if>
			<if test="orderPromotionDiscount != null">
				order_promotion_discount = #{orderPromotionDiscount},
			</if>
			<if test="orderGivePoints != null">
				order_give_points = #{orderGivePoints},
			</if>
			<if test="deliveryFee != null">
				delivery_fee =
				#{deliveryFee},
			</if>
			<if test="cancelReason != null">
				cancel_reason = #{cancelReason},
			</if>
			<if test="orderCancelDate != null">
				order_cancel_date = #{orderCancelDate},
			</if>
			<if test="orderCanceOperateType != null">
				order_cance_operate_type = #{orderCanceOperateType},
			</if>
			<if test="orderChannel != null">
				order_channel = #{orderChannel},
			</if>
			<if test="invoiceId != null">
				invoice_id = #{invoiceId},
			</if>
			<if test="orderDeleteStatus != null">
				order_delete_status = #{orderDeleteStatus},
			</if>
			<if test="paidOnlineThreshold != null">
				paid_online_threshold = #{paidOnlineThreshold},
			</if>
			<if test="receiverAddressId != null">
				receiver_address_id = #{receiverAddressId},
			</if>
			<if test="modifiedAddress != null">
				modified_address = #{modifiedAddress},
			</if>
			<if test="modifyAddressTime != null">
				modify_address_time = #{modifyAddressTime},
			</if>
			<if test="incrementTaxAmount != null">
				increment_tax_amount = #{incrementTaxAmount},
			</if>
			<if test="customsDutiesAmount != null">
				customs_duties_amount = #{customsDutiesAmount},
			</if>
			<if test="deliveryEndtime != null">
				delivery_endtime = #{deliveryEndtime},
			</if>
			<if test="deliveryStatus != null">
				delivery_status = #{deliveryStatus},
			</if>
			<if test="lastOperatorId != null">
				last_operator_id = #{lastOperatorId},
			</if>
			<if test="refundTime != null">
				refund_time = #{refundTime},
			</if>
			<if test="remark != null">
				remark = #{remark},
			</if>
			<if test="createTime != null">
				create_time = #{createTime},
			</if>
			<if test="updateTime != null">
				update_time = #{updateTime},
			</if>
			<if test="platformId != null">
				platform_id = #{platformId},
			</if>
			<if test="refundCash != null">
				refund_cash=#{refundCash},
			</if>
			<if test="refundFubi != null">
				refund_fubi=#{refundFubi},
			</if>
			<if test="companyId != null">
				company_id=#{companyId},
			</if>
			<if test="signPlatform != null">
				sign_platform=#{signPlatform},
			</if>
			<if test="saleWay != null">
				sale_way=#{saleWay},
			</if>
			<if test="storeId != null">
				store_id=#{storeId},
			</if>
			<if test="couponUnitId != null">
				coupon_unit_id=#{couponUnitId},
			</if>
			<if test="storeDiscount != null">
				store_discount=#{storeDiscount},
			</if>
			<if test="deliveryFeeDiscount != null">
				delivery_fee_discount=#{deliveryFeeDiscount},
			</if>
			<if test="limitCashPayAmount != null">
				limit_cash_pay_amount=#{limitCashPayAmount},
			</if>
			<if test="limitFuBiPayAmount != null">
				limit_fubi_pay_amount=#{limitFuBiPayAmount},
			</if>
		</set>
		WHERE id = #{id}
	</update>


	<delete id="delete">
		delete from so_jd where id = #{id}
	</delete>

	<delete id="deleteByPara">
		delete from so_jd
		<where>
			<if test="orderCode != null">
				and order_code = #{orderCode}
			</if>
			<if test="userId != null">
				and user_id = #{userId}
			</if>
			<if test="orderAmount != null">
				and order_amount = #{orderAmount}
			</if>
			<if test="orderAmountPay != null">
				and order_amount_pay = #{orderAmountPay}
			</if>
			<if test="productAmount != null">
				and product_amount = #{productAmount}
			</if>
			<if test="orderStatus != null">
				and order_status = #{orderStatus}
			</if>
			<if test="orderConfirmStatus != null">
				and order_confirm_status = #{orderConfirmStatus}
			</if>
			<if test="orderPayStatus != null">
				and order_pay_status = #{orderPayStatus}
			</if>
			<if test="orderAutoCompleteDate != null">
				and order_auto_complete_date = #{orderAutoCompleteDate}
			</if>
			<if test="orderPaymentConfirmDate != null">
				and order_payment_confirm_date =
				#{orderPaymentConfirmDate}
			</if>
			<if test="orderPaymentConfirmType != null">
				and order_payment_confirm_type =
				#{orderPaymentConfirmType}
			</if>
			<if test="orderDeliveryFee != null">
				and order_delivery_fee = #{orderDeliveryFee}
			</if>
			<if test="orderDeliveryFeeInsuranceType != null">
				and order_delivery_fee_insurance_type =
				#{orderDeliveryFeeInsuranceType}
			</if>
			<if test="orderDeliveryFeeInsuranceAmount != null">
				and order_delivery_fee_insurance_amount =
				#{orderDeliveryFeeInsuranceAmount}
			</if>
			<if test="cashPayType != null">
				and cash_pay_type = #{cashPayType}
			</if>
			<if test="orderPaidByCash != null">
				and order_paid_by_cash = #{orderPaidByCash}
			</if>
			<if test="couponDiscount != null">
				and coupon_discount = #{couponDiscount}
			</if>
			<if test="orderPaidByCard != null">
				and order_paid_by_card = #{orderPaidByCard}
			</if>
			<if test="orderPaidByRebate != null">
				and order_paid_by_rebate = #{orderPaidByRebate}
			</if>
			<if test="orderPaidByFubi != null">
				and order_paid_by_fubi = #{orderPaidByFubi}
			</if>
			<if test="useFubi != null">
				and use_fubi = #{useFubi}
			</if>
			<if test="orderPromotionDiscount != null">
				and order_promotion_discount = #{orderPromotionDiscount}
			</if>
			<if test="orderGivePoints != null">
				and order_give_points = #{orderGivePoints}
			</if>
			<if test="deliveryFee != null">
				and delivery_fee =
				#{deliveryFee}
			</if>
			<if test="cancelReason != null">
				and cancel_reason = #{cancelReason}
			</if>
			<if test="orderCancelDate != null">
				and order_cancel_date = #{orderCancelDate}
			</if>
			<if test="orderCanceOperateType != null">
				and order_cance_operate_type = #{orderCanceOperateType}
			</if>
			<if test="orderChannel != null">
				and order_channel = #{orderChannel}
			</if>
			<if test="invoiceId != null">
				and invoice_id = #{invoiceId}
			</if>
			<if test="orderDeleteStatus != null">
				and order_delete_status = #{orderDeleteStatus}
			</if>
			<if test="paidOnlineThreshold != null">
				and paid_online_threshold = #{paidOnlineThreshold}
			</if>
			<if test="receiverAddressId != null">
				and receiver_address_id = #{receiverAddressId}
			</if>
			<if test="modifiedAddress != null">
				and modified_address = #{modifiedAddress}
			</if>
			<if test="modifyAddressTime != null">
				and modify_address_time = #{modifyAddressTime}
			</if>
			<if test="incrementTaxAmount != null">
				and increment_tax_amount = #{incrementTaxAmount}
			</if>
			<if test="customsDutiesAmount != null">
				and customs_duties_amount = #{customsDutiesAmount}
			</if>
			<if test="deliveryEndtime != null">
				and delivery_endtime = #{deliveryEndtime}
			</if>
			<if test="deliveryStatus != null">
				and delivery_status = #{deliveryStatus}
			</if>
			<if test="lastOperatorId != null">
				and last_operator_id = #{lastOperatorId}
			</if>
			<if test="refundTime != null">
				and refund_time = #{refundTime}
			</if>
			<if test="remark != null">
				and remark = #{remark}
			</if>
			<if test="createTime != null">
				and create_time = #{createTime}
			</if>
			<if test="updateTime != null">
				and update_time = #{updateTime}
			</if>
			<if test="platformId != null">
				and platform_id = #{platformId}
			</if>
			<if test="refundCash != null">
				and refund_cash=#{refundCash}
			</if>
			<if test="refundFubi != null">
				and refund_fubi=#{refundFubi}
			</if>
			<if test="companyId != null">
				and company_id=#{companyId}
			</if>
			<if test="signPlatform != null">
				and sign_platform=#{signPlatform}
			</if>
			<if test="storeId != null">
				and store_id=#{storeId}
			</if>
		</where>
	</delete>

</mapper>
	